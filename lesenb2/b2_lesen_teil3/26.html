
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Lesen Teil 3</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Font Awesome for Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* ========================================= */
    /*        1. PROFESSIONAL VARIABLES          */
    /* ========================================= */
    :root {
      /* Palette */
      --primary: #1e293b;       
      --primary-soft: #e0e7ff;
      --bg-body: #f8fafc;       
      --surface: #ffffff;
      
      --text-main: #0f172a;     
      --text-muted: #64748b;    
      
      --success: #10b981;
      --success-bg: #ecfdf5;
      --error: #ef4444;
      --error-bg: #fef2f2;

      /* Dimensions */
      --radius: 12px;
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      
      --header-height: 60px;
      /* INCREASED HEIGHT FOR MOBILE SLIDER */
      --mobile-answer-height: 170px; 
    }

    *, *::before, *::after { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      margin: 0;
      padding: 0;
      background-color: var(--bg-body);
      color: var(--text-main);
      min-height: 100vh;
      line-height: 1.5;
    }

    /* ========================================= */
    /*           2. HEADER (FIXED)               */
    /* ========================================= */
    .header {
      position: fixed;
      top: 0; left: 0; width: 100%;
      height: var(--header-height);
      background: var(--primary);
      border-bottom: 1px solid rgba(0,0,0,0.08);
      color: var(--surface);
      z-index: 2000;
      display: flex; align-items: center; justify-content: center;
      font-weight: 800; font-size: 1.2rem;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
      margin: 0;
    }

    /* ========================================= */
    /*           3. LAYOUT CONTAINER             */
    /* ========================================= */
    .container {
      max-width: 1280px;
      margin: 0 auto;
      padding-top: calc(var(--header-height) + 30px);
      padding-bottom: 60px;
      padding-left: 20px; padding-right: 20px;
      display: flex;
      gap: 30px;
      align-items: flex-start;
    }

    /* ========================================= */
    /*        4. LEFT COLUMN (QUESTIONS)         */
    /* ========================================= */
    .left-column {
      width: 65%;
      flex-shrink: 0;
    }

    .quiz-scroll-container {
      background: transparent;
      padding: 0;
      box-shadow: none;
      max-height: none;
      overflow: visible;
    }

    .question-box {
      background: var(--surface);
      border-radius: var(--radius);
      padding: 25px;
      margin-bottom: 24px;
      box-shadow: var(--shadow);
      border: 1px solid #e2e8f0;
      border-left: 5px solid var(--primary);
    }

    .question-text {
      font-size: 1rem;
      color: #334155;
      margin-top: 15px;
    }
    
    .question-text h4 { margin-top: 0; color: var(--primary); margin-bottom: 8px; }

    /* DROP ZONES */
    .drop-target {
      background-color: #f1f5f9;
      border: 2px dashed #cbd5e1;
      border-radius: 10px;
      min-height: 60px;
      display: flex; align-items: center; justify-content: center;
      transition: all 0.2s;
      cursor: pointer;
      position: relative;
      margin-bottom: 15px;
    }

    .drop-target.empty-drop-target::before {
      content: "Hier Antwort ablegen";
      color: #94a3b8; font-size: 0.9rem; font-weight: 500;
      pointer-events: none;
    }

    .drop-target.drag-over {
      background-color: var(--primary-soft);
      border-color: var(--primary);
      transform: scale(1.01);
    }

    /* DROPPED ITEMS */
    .drop-target .draggable {
      background: transparent; border: none; box-shadow: none;
      width: 100%; margin: 0; padding: 5px;
      text-align: center; color: var(--primary); font-weight: 700;
      flex-direction: column;
    }

    /* ========================================= */
    /*        5. RIGHT COLUMN (ANSWERS)          */
    /* ========================================= */
    .right-column {
      width: 30%;
      position: sticky; 
      top: calc(var(--header-height) + 20px); 
      height: calc(100vh - 100px);
      z-index: 1000;
    }

    .right-column-content {
      background: var(--surface);
      padding: 15px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid #e2e8f0;
      max-height: 100%;
      overflow-y: auto;
    }

    /* DRAGGABLE CARDS */
    .draggable {
      background: white;
      border: 1px solid #e2e8f0;
      padding: 12px 15px;
      margin-bottom: 10px;
      border-radius: 8px;
      cursor: grab;
      font-size: 0.9rem; font-weight: 500; color: #334155;
      box-shadow: 0 1px 2px rgba(0,0,0,0.04);
      display: flex; align-items: flex-start; gap: 10px;
      user-select: none;
    }

    .draggable.selected {
      background-color: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    /* CHECKBOX Styling */
    .wrong-flag {
      width: 18px; height: 18px;
      margin-top: 3px;
      flex-shrink: 0;
      cursor: pointer;
      accent-color: var(--error);
    }

    /* ========================================= */
    /*        6. FEEDBACK & BUTTONS              */
    /* ========================================= */
    .drop-target.correct { background: var(--success-bg) !important; border-color: var(--success) !important; }
    .drop-target.correct .draggable { color: #065f46 !important; }
    .drop-target.incorrect { background: var(--error-bg) !important; border-color: var(--error) !important; }
    .drop-target.incorrect .draggable { color: #991b1b !important; }

    /* Buttons */
    .button-container { display: flex; justify-content: center; gap: 15px; margin-top: 40px; margin-bottom: 40px;}
    
    .quiz-button {
      background: var(--text-main); color: white;
      padding: 14px 28px; border-radius: 50px;
      font-weight: 600; border: none; cursor: pointer;
      display: flex; align-items: center; gap: 8px; font-size: 1rem;
      transition: all 0.2s;
      box-shadow: var(--shadow);
      text-decoration: none;
    }
    
    .quiz-button.secondary {
      background: white; color: var(--text-main); border: 1px solid #cbd5e1;
    }

    #result { text-align: center; margin-top: 20px; font-weight: bold; padding: 20px; background: white; border-radius: var(--radius); box-shadow: var(--shadow); }

    /* ========================================= */
    /*           7. MOBILE RESPONSIVE            */
    /* ========================================= */
    @media (max-width: 991px) {
      
      .header { font-size: 1rem; padding: 0 10px; }

      .container {
        flex-direction: column;
        padding: 0;
        /* Padding Top = Header + Bigger AnswerBar + Gap */
        padding-top: calc(var(--header-height) + var(--mobile-answer-height) + 25px);
      }

      /* 1. ANSWER BAR (FIXED TOP HORIZONTAL SLIDER) */
      .right-column {
        position: fixed;
        top: var(--header-height);
        left: 0; width: 100%;
        height: var(--mobile-answer-height);
        z-index: 1500;
        
        background: #f8fafc; /* Match body bg */
        border-bottom: 1px solid rgba(0,0,0,0.1);
        box-shadow: 0 4px 10px -2px rgba(0,0,0,0.05);
      }

      .right-column-content {
        display: flex; 
        flex-direction: row; 
        gap: 12px;
        /* Increased padding inside the slider to prevent clipping */
        padding: 15px 15px;
        
        height: 100%; width: 100%;
        background: transparent;
        border: none; box-shadow: none; border-radius: 0;
        
        overflow-x: auto; 
        overflow-y: hidden;
        white-space: normal;
        scroll-snap-type: x mandatory;
        align-items: center; /* Center vertically */
      }
      .right-column-content::-webkit-scrollbar { display: none; }

      /* Mobile Draggable Cards */
      .draggable {
        flex: 0 0 auto;
        width: 250px; /* Slightly wider */
        height: calc(100% - 10px); /* Leave room for shadow */
        margin: 0;
        
        display: flex; 
        align-items: flex-start; /* Align text top */
        justify-content: center; 
        text-align: left;
        
        font-size: 0.8rem;
        padding: 10px;
        scroll-snap-align: center;
        border: 1px solid #e2e8f0;
        background: white;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
      }
      
      .draggable input.wrong-flag {
          margin-top: 2px; /* Fix checkbox alignment */
      }

      /* 2. Questions */
      .left-column { width: 100%; padding: 0 15px; }
      .question-box { padding: 20px; }

      /* 3. Buttons */
      .button-container { flex-direction: column; padding: 0 15px; gap: 10px; }
      .quiz-button { width: 100%; justify-content: center; }
    }
  </style>
</head>
<body>

<div class="header">Lesen Teil 3: Schlafzug </div>

<div class="container">
  <div class="left-column">
    <div class="quiz-scroll-container">
      <!-- Questions A-->
      <div class="question-box" data-correct="Sie m√∂chten mit Freunden einen unterhaltsamen Film anschauen.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <p>Das Comedy Filmfest tourt auch dieses Jahr durch Deutschland. In Berlin startet es am 14. August mit der belgischen Produktion ‚ÄûSchokolade und Pommes frites‚Äú. In dieser romantischen Kom√∂die treffen zwei Charaktere aufeinander, die unterschiedlicher kaum sein k√∂nnten: Die zielstrebige, doch ein wenig sch√ºchterne Marie hat sich mit einem Schokoladengesch√§ft ihren gro√üen Traum verwirklicht. Alles l√§uft gut, bis auf der anderen Stra√üenseite der chaotische Lebensk√ºnstler Michel einen Schnellimbiss er√∂ffnet und Maries Leben reichlich durcheinanderwirbelt.</p>
            <h4>Schokolade und Pommes frites‚Äú: 14. August, 20 Uhr, Filmtheater Friedrichshain </h4>
        </div>
      </div>
    <!-- Questions B-->
      <div class="question-box" data-correct="__NO_CORRECT_ANSWER__">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <p>Als die Bilder laufen lernten Dieser Band l√§dt Sie ein, eine bewegte Kinoepoche zu entdecken. In den Jahren von 1895 bis 1930 entwickelte sich das Kino in atemberaubendem Tempo zum Unterhaltungsmedium schlechthin. Autorin Greta Valentino geht zur√ºck bis zu den ersten Filmen der Br√ºder Lumi√®re und den Anf√§ngen des Westerns und taucht anschlie√üend ein in die schillernden 1920er Jahre, als der Stummfilm seine goldene √Ñra feierte und Filmpal√§ste wie Pilze aus dem Boden schossen. Die Autorin studierte Kunstgeschichte in Paris und Amsterdam. Sie ver√∂ffentlichte B√ºcher sowie zahlreiche Artikel √ºber Kunst und Kino.</p>
        </div>
      </div>
      <!-- Questions C-->
      <div class="question-box" data-correct="Sie w√ºrden gerne mit Freunden eine mehrt√§gige Stadttour machen und suchen ein Angebot.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <p>Berlin erleben Unsere Reise f√ºhrt Sie in eine der abwechslungsreichsten St√§dte Deutschlands: Berlin. Mit historischen Bauwerken und Museen, breiten Prachtstra√üen und Einkaufsmeilen sowie weitl√§ufigen Parks und G√§rten hat die Hauptstadt f√ºr jeden etwas zu bieten. Reisen Sie bequem mit der Deutschen Bahn und verbringen Sie aufregende Tage in Berlin. √úbernachtung mit Fr√ºhst√ºck im Hotel. Dauer: ab 4 Tage (Verl√§ngerung m√∂glich) Preis: ab 437 Euro pro Person im Doppelzimmer inklusive An- und Abreise mit der Deutschen Bahn.</p>
            <h4>Mehr Infos unter: www.bergmann-reisen.info</h4>
        </div>
      </div>
      <!-- Questions D-->
      <div class="question-box" data-correct="Eine Bekannte tr√§umt davon, selbst einmal bei einem Film mitzuspielen.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
          <h3>Berlin Gendarmenmarkt</h3>
            <p>Im M√§rz beginnen die Dreharbeiten f√ºr den Film ‚ÄûBerlin Gendarmenmarkt‚Äú. Erz√§hlt wird die Geschichte der sechzehnj√§hrigen Ida, die Jugend und Erwachsenwerden im Berlin der Goldenen Zwanziger erlebt und von einer gro√üen Karriere auf der Theaterb√ºhne. Die Romanvorlage f√ºr den Film lieferte die Schriftstellerin Marie Franck. F√ºr kleinere oder als Komparsen werden noch Mitwirkende jeden Alters gesucht. Die Gage betr√§gt 75 ‚Ç¨ pro Drehtag. Bewerbungsschluss ist der 16. November.</p>
            <h4>Infos und Bewerbung unter: www.film-gendarmenmarkt.info/casting </h4>
        </div>
      </div>
      <!-- Questions E-->
      <div class="question-box" data-correct="__NO_CORRECT_ANSWER__">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <p>Berlin in den zwanziger Jahren Dreigroschenoper, Bubikopf, Dada, Bauhausarchitektur. Dieser Bildband erweckt das Berlin in den 1920ern wieder zum Leben. In dieser Dekade war Berlin eine moderne, von Fortschritt und Freiheit berauschte Weltstadt, die f√ºr K√ºnstler und Intellektuelle zum Sehnsuchtsort wurde. Autor Gereon Kutscher nimmt Sie mit auf einen Streifzug durch eine Epoche der kulturellen Bl√ºte und der Lebenslust. Gereon Kutscher: Berlin in den zwanziger Jahren, Hardcover, 126 Seiten, 28 ‚Ç¨ </p>
            
        </div>
      </div>
      <!-- Questions F-->
      <div class="question-box" data-correct="Ein Bekannter ist ein paar Tage in Berlin und w√ºrde sich gerne verschiedene Kunstausstellungen ansehen.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
          <p>Eine Karte, 30 H√§user Ob Meisterwerke der Kunst, arch√§ologische Sch√§tze aus sechs Jahrtausenden oder technische Errungenschaften ‚Äì das alles finden Sie in den Berliner Museen. Mit dem Museumspass √∂ffnen sich Ihnen die T√ºren von √ºber 30 H√§usern, darunter die Alte Nationalgalerie, das Pergamonmuseum, das Museum f√ºr Naturkunde und die Neue Nationalgalerie. An drei aufeinanderfolgenden Tagen haben Sie damit freien Eintritt.</p>
          <h4>Preis: 29 ‚Ç¨, erm√§√üigt 14,50 ‚Ç¨ Ticket hier online kaufen: https://shop.nmg.museum</h4>  
        </div>
      </div>
      <!-- Questions G-->
      <div class="question-box" data-correct="Sie sind zu einer Kost√ºm-Party eingeladen und brauchen daf√ºr etwas zum Anziehen.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <p>Feiern wie in den Goldenen Zwanzigern Ein ausgelassenes Lebensgef√ºhl und rauschende N√§chte. So stellt man sich die 1920er Jahre vor, an die Filme wie ‚ÄûDer gro√üe Gatsby und Serien wie ‚ÄûBabylon Berlin' immer wieder erinnern. Gehen Sie auf eine glamour√∂se Zeitreise und lassen Sie diese √Ñra wiederauferstehen. Wir haben daf√ºr die passende Kleidung f√ºr Sie. In unserem Online-Shop finden Sie alles, was Sie f√ºr einen gl√§nzenden Auftritt auf einer Mottoparty brauchen.</p>
            <h4>Paillettenkleider und Kopfschmuck f√ºr Damen, Westen und Anz√ºge f√ºr Herren und Accessoires sowie Dekoartikel. www.golden20.com</h4>
        </div>
      </div>
      <!-- Questions H-->
      <div class="question-box" data-correct="Eine Freundin sucht einen Nebenjob. Sie w√ºrde dabei gerne viel Zeit drau√üen verbringen.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
          <h3>Stadtf√ºhrungen in Berlin</h3>
          <p>Sie erz√§hlen gerne spannende Geschichten, sind gut zu Fu√ü und lieben es, andere f√ºr besondere Orte zu begeistern? Dann sind Sie bei uns richtig. Wir bieten Stadtf√ºhrungen und Stadtrundg√§nge in Berlin an und suchen f√ºr eine langfristige Zusammenarbeit (mindestens ein Jahr) neue Kolleginnen und Kollegen. Wenn Sie gut mit Menschen umgehen k√∂nnen und kommunikativ sind, k√∂nnen Sie direkt bei uns als Stadtf√ºhrer anfangen. Job auf 450-‚Ç¨-Basis, freie Zeiteinteilung auch f√ºr Freiberufler m√∂glich.</p>
          <h4>Interesse? Bewerben Sie sich hier: info@berlintouren-kraemer.net</h4>
        </div>
      </div>
      <!-- Questions I-->
      <div class="question-box" data-correct="Ihr Cousin ist Student und sucht f√ºr die Sommermonate einen Nebenjob.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h3>Sie lieben Filme?</h3>
            <p>Dann machen Sie doch das Kino zu Ihrem Arbeitsplatz und werden; Sie Teil unseres Teams! Das Metropolis Filmtheater Altenberg sucht eine Aushilfe als Urlaubsvertretung f√ºr die Monate Juli und August, 25 Stunden pro Woche. Zu Ihren Aufgaben geh√∂ren u. a. der Verkauf von Kinokarten, Popcorn und Getr√§nken sowie die Einlasskontrolle und die Vorbereitung der S√§le. Sie sind vollj√§hrig, zuverl√§ssig und bereit, auch am Abend oder Wochenende zu arbeiten? Dann freuen wir uns auf Ihre Bewerbung mit kurzem Anschreiben und Lebenslauf per E-Mail.</p>
            <h4>Metropolis Kino Altenberg info@metropolis-altenberg.net</h4>
          </div>
      </div>
      <!-- Questions J-->
      <div class="question-box" data-correct="Sie m√∂chten eine besondere Stadtf√ºhrung in Berlin buchen.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h3>Das etwas gem√ºtlichere Berlin</h3>
            <p>Der wenig bekannte Berliner Stadtteil Friedenau ist bis heute eher ein Geheimtipp. Das Viertel besticht durch pr√§chtig geschm√ºckte Wohnh√§user, kleine Villen und eine bunt gemischte Gastronomie. Kommen Sie mit auf eine kulinarisch kulturelle F√ºhrung durch das charmante, ruhige Friedenau. Erfahren Sie mehr √ºber die ber√ºhmten Gesichter dieses Stadtviertels, entdecken Sie wundersch√∂ne Altbauten und lernen Sie die beeindruckenden G√∂rz-H√∂fe kennen. Unsere erfahrenen Stadtf√ºhrer zeigen Ihnen au√üerdem spannende Orte zum Genie√üen, zum Beispiel ein italienisches Caf√©, eine koreanische Snack-Bar und ein marokkanisches Bistro. 3 Stunden, ca. 3 km zu Fu√ü Preis: 39 ‚Ç¨, erm√§√üigt 20 ‚Ç¨ </p>
            <h4>Anmeldung unter: www.friedenau-touren.net</h4>
        </div>
      </div>
        <!-- Questions K-->
      <div class="question-box" data-correct="__NO_CORRECT_ANSWER__">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <p>Wer hat die Kokosnuss geklaut? Bei dieser Tour geht es ins Affenhaus! Beobachte Gorillas, Paviane und Co. bei der Futtersuche und finde heraus, was sie am liebsten fressen. Nat√ºrlich bleibt noch Zeit, bei anderen Zoo-Bewohnern vorbeizuschauen. Geh zusammen mit einem Guide auf eine besondere Entdeckungstour durch den Zoo Berlin. Spannende Tier Fakten und exklusive Einblicke in den Zoo-Alltag warten auf dich! F√ºhrung f√ºr Kinder ab 8 Jahren.</p>
            <h4>Zoologischer Garten Berlin Hardenberg Platz 8, 10787 Berlin Eintritt: Erwachsene 17,50 ‚Ç¨, Kinder 9 ‚Ç¨</h4>
        </div>
      </div>
    </div>
  </div>

  <div class="right-column">
    <!-- MODIFIED: Added ondragover and ondrop to make this a droppable area -->
    <div class="right-column-content" onclick="clearSelected()" ondragover="allowDrop(event)" ondrop="dropOnAnswersContainer(event)">
      <!-- Answers -->
      <div class="draggable" draggable="true" id="a1" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Ein Bekannter ist ein paar Tage in Berlin und w√ºrde sich gerne verschiedene Kunstausstellungen ansehen.
      </div>
      <div class="draggable" draggable="true" id="a2" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Eine Bekannte tr√§umt davon, selbst einmal bei einem Film mitzuspielen.
      </div>
      <div class="draggable" draggable="true" id="a3" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Ein Freund w√ºrde sich gerne einen Dokumentarfilm √ºber Tiere ansehen.
      </div>
      <div class="draggable" draggable="true" id="a4" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Eine Freundin sucht einen Nebenjob. Sie w√ºrde dabei gerne viel Zeit drau√üen verbringen. 
      </div>
      <div class="draggable" draggable="true" id="a5" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Ihr Cousin ist Student und sucht f√ºr die Sommermonate einen Nebenjob.
      </div>
      <div class="draggable" draggable="true" id="a6" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Ihre achtj√§hrige Nichte interessiert sich f√ºr Tiere und Natur. Sie m√∂chten ihr zum Geburtstag ein Buch schenken. 
      </div>
      <div class="draggable" draggable="true" id="a7" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Sie m√∂chten eine besondere Stadtf√ºhrung in Berlin buchen. 
      </div>
      <div class="draggable" draggable="true" id="a8" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Sie m√∂chten mit Freunden einen unterhaltsamen Film anschauen.
      </div>
      <div class="draggable" draggable="true" id="a9" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Sie sind zu einer Kost√ºm-Party eingeladen und brauchen daf√ºr etwas zum Anziehen. 
      </div>
      <div class="draggable" draggable="true" id="a10" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Sie w√ºrden gerne mit Freunden eine mehrt√§gige Stadttour machen und suchen ein Angebot.
      </div>
    </div>
  </div>
</div>

<div id="result"></div>
<div class="button-container">
    <button id="submitQuizButton" class="quiz-button">
      <i class="fas fa-paper-plane"></i> Abschicken
    </button>
    <button id="resetQuizButton" class="quiz-button secondary">
      <i class="fas fa-redo"></i> Zur√ºcksetzen
    </button>
    <!-- Changed to <a> tag for navigation, href to a generic "index.html" or "#" -->
    <a href="/b2_exam.html" id="homeButton" class="quiz-button secondary" role="button">
      <i class="fas fa-home"></i> Startseite
    </a>
  </div>

<script>
  let selectedAnswer = null;
  const rightColumnContent = document.querySelector(".right-column-content");
  const originalAnswerOrder = Array.from(rightColumnContent.querySelectorAll('.draggable')); // Store initial order for reset

  // MODIFIED: allowDrop to correctly identify parent droppable container
  function allowDrop(ev) {
    ev.preventDefault();
    let droppableContainer = ev.target;
    // Traverse up to find the actual droppable container (.drop-target or .right-column-content)
    while (droppableContainer && droppableContainer !== document.body &&
           !droppableContainer.classList.contains("drop-target") &&
           !droppableContainer.classList.contains("right-column-content")) {
        droppableContainer = droppableContainer.parentElement;
    }

    if (droppableContainer && (droppableContainer.classList.contains("drop-target") || droppableContainer.classList.contains("right-column-content"))) {
        droppableContainer.classList.add("drag-over");
    }
  }

  function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.id);
    ev.target.classList.add("dragging");
  }

  document.addEventListener('dragleave', function(event) {
    if (event.target.classList && (event.target.classList.contains("drop-target") || event.target.classList.contains("right-column-content"))) {
        if (!event.target.contains(event.relatedTarget) && event.target !== event.relatedTarget) {
             event.target.classList.remove("drag-over");
        } else if (event.relatedTarget === null) { 
            event.target.classList.remove("drag-over");
        }
    }
  }, false);
  
  document.addEventListener('dragend', function(event) {
    if (event.target.classList && event.target.classList.contains('draggable')) {
      event.target.classList.remove('dragging');
    }
    document.querySelectorAll('.drop-target.drag-over, .right-column-content.drag-over').forEach(el => {
        el.classList.remove('drag-over');
    });
  });

  // MODIFIED: drop function for question slots
  function drop(ev) {
    ev.preventDefault();
    const draggedId = ev.dataTransfer.getData("text");
    const draggedEl = document.getElementById(draggedId);
    let dropTarget = ev.target;

    while (dropTarget && !dropTarget.classList.contains("drop-target")) {
        dropTarget = dropTarget.parentElement;
    }
    
    if (!dropTarget || !draggedEl) return;

    dropTarget.classList.remove("drag-over");

    const originalParentOfDraggedEl = draggedEl.parentElement; 

    const currentAnswerInTarget = dropTarget.querySelector(".draggable");
    if (currentAnswerInTarget && currentAnswerInTarget !== draggedEl) {
      rightColumnContent.appendChild(currentAnswerInTarget);
      showCheckbox(currentAnswerInTarget);
    }
    
    dropTarget.innerHTML = ""; 
    dropTarget.appendChild(draggedEl);
    hideCheckbox(draggedEl);
    updateDropTargetState(dropTarget);

    if (originalParentOfDraggedEl &&
        originalParentOfDraggedEl.classList.contains("drop-target") &&
        originalParentOfDraggedEl !== dropTarget) {
        updateDropTargetState(originalParentOfDraggedEl);
    }

    if (selectedAnswer === draggedEl) {
        draggedEl.classList.remove("selected");
        selectedAnswer = null;
    }
  }

  // NEW: Function to handle drops onto the answers container
  function dropOnAnswersContainer(ev) {
    ev.preventDefault();
    const draggedId = ev.dataTransfer.getData("text");
    const draggedEl = document.getElementById(draggedId);
    const answersContainer = ev.currentTarget; 

    if (!draggedEl || !answersContainer) return;

    answersContainer.classList.remove("drag-over");

    const originalParentOfDraggedEl = draggedEl.parentElement; 

    answersContainer.appendChild(draggedEl);
    showCheckbox(draggedEl);

    if (originalParentOfDraggedEl && originalParentOfDraggedEl.classList.contains("drop-target")) {
        updateDropTargetState(originalParentOfDraggedEl);
    }

    if (selectedAnswer === draggedEl) {
        draggedEl.classList.remove("selected");
        selectedAnswer = null;
    }
  }


  function hideCheckbox(el) {
    const checkbox = el.querySelector(".wrong-flag");
    if (checkbox) checkbox.style.display = "none";
  }

  function showCheckbox(el) {
    const checkbox = el.querySelector(".wrong-flag");
    if (checkbox) checkbox.style.display = "inline-block";
  }

  function selectAnswer(el, event) {
    event.stopPropagation(); 
    if (selectedAnswer === el) { 
      el.classList.remove("selected");
      selectedAnswer = null;
    } else {
      if (selectedAnswer) selectedAnswer.classList.remove("selected");
      selectedAnswer = el;
      el.classList.add("selected");
    }
  }

  // MODIFIED: clickDrop function
  function clickDrop(targetDropzone) {
    if (selectedAnswer) {
      const originalParentOfSelectedAnswer = selectedAnswer.parentElement;

      const currentAnswerInDropzone = targetDropzone.querySelector(".draggable");
      if (currentAnswerInDropzone && currentAnswerInDropzone !== selectedAnswer) {
        rightColumnContent.appendChild(currentAnswerInDropzone);
        showCheckbox(currentAnswerInDropzone);
      }
      
      targetDropzone.innerHTML = ""; 
      targetDropzone.appendChild(selectedAnswer);
      hideCheckbox(selectedAnswer);
      updateDropTargetState(targetDropzone);

      if (originalParentOfSelectedAnswer &&
          originalParentOfSelectedAnswer.classList.contains("drop-target") &&
          originalParentOfSelectedAnswer !== targetDropzone) {
          updateDropTargetState(originalParentOfSelectedAnswer);
      }

      selectedAnswer.classList.remove("selected");
      selectedAnswer = null;
    }
  }

  function clearSelected() {
    if (selectedAnswer) {
      selectedAnswer.classList.remove("selected");
      selectedAnswer = null;
    }
  }

  function updateDropTargetState(dropTarget) {
    if (!dropTarget || !dropTarget.classList.contains('drop-target')) return;
    
    if (dropTarget.querySelector(".draggable")) {
      dropTarget.classList.remove("empty-drop-target");
    } else {
      dropTarget.classList.add("empty-drop-target");
    }
  }

  function getDraggableText(draggableElement) {
    const clone = draggableElement.cloneNode(true);
    const checkbox = clone.querySelector('.wrong-flag');
    if (checkbox) {
        checkbox.remove();
    }
    return clone.textContent.trim();
  }

  function submitQuiz() {
    let total = 0, correct = 0;
    document.querySelectorAll('.question-box').forEach((box) => {
      total++;
      const correctAnswerText = box.getAttribute("data-correct").trim();
      const dropTarget = box.querySelector(".drop-target");
      const droppedDraggable = dropTarget.querySelector(".draggable");
      
      dropTarget.classList.remove("correct", "incorrect"); 

      if (droppedDraggable) { 
        const selectedText = getDraggableText(droppedDraggable); 
        if (correctAnswerText === "__NO_CORRECT_ANSWER__") {
          dropTarget.classList.add("incorrect");
        } else {
          if (selectedText === correctAnswerText) {
            dropTarget.classList.add("correct");
            correct++;
          } else {
            dropTarget.classList.add("incorrect");
          }
        }
      } else { 
        if (correctAnswerText !== "__NO_CORRECT_ANSWER__") {
          dropTarget.classList.add("incorrect");
        }
      }
      updateDropTargetState(dropTarget); 
    });

    let wrongMarkedCorrect = 0, wrongMarkedTotal = 0;
    rightColumnContent.querySelectorAll('.draggable').forEach((answerEl) => {
      const text = getDraggableText(answerEl); 
      const checkbox = answerEl.querySelector('.wrong-flag');
      
      const isACorrectAnswerOptionForAnyQuestion = Array.from(document.querySelectorAll('.question-box'))
        .some(box => {
            const qCorrectText = box.getAttribute('data-correct').trim();
            return qCorrectText !== "__NO_CORRECT_ANSWER__" && qCorrectText === text;
        });
      
      if (!isACorrectAnswerOptionForAnyQuestion) { 
        wrongMarkedTotal++; 
        if (checkbox.checked) {
          wrongMarkedCorrect++; 
        }
      }
    });

    const questionsWithNoAnswer = Array.from(document.querySelectorAll('.question-box'))
                                      .filter(box => box.getAttribute('data-correct').trim() === "__NO_CORRECT_ANSWER__").length;
    const scorableTotal = total - questionsWithNoAnswer;


    const resultDiv = document.getElementById("result");
    resultDiv.innerHTML =
      `<span class="correct-count">‚úÖ ${correct}</span> von <span class="total-count">${scorableTotal}</span> bewertbaren Fragen richtig. | ` + 
      `<span class="marked-wrong-count">üö´ Falsch-Antworten korrekt markiert: ${wrongMarkedCorrect}</span> von ${wrongMarkedTotal}.`;
  }

  function resetQuiz() {
    document.querySelectorAll('.drop-target').forEach(dt => {
        const draggable = dt.querySelector('.draggable');
        if (draggable) {
            rightColumnContent.appendChild(draggable); 
            showCheckbox(draggable); 
        }
        dt.innerHTML = ''; 
        dt.classList.remove('correct', 'incorrect'); 
        updateDropTargetState(dt); 
    });

    rightColumnContent.innerHTML = ''; 
    originalAnswerOrder.forEach(draggable => {
        rightColumnContent.appendChild(draggable); 
        draggable.classList.remove('selected', 'dragging'); 
        showCheckbox(draggable); 
        const checkbox = draggable.querySelector('.wrong-flag');
        if (checkbox) checkbox.checked = false; 
    });
    
    if (selectedAnswer) {
      selectedAnswer.classList.remove('selected');
      selectedAnswer = null;
    }

    document.getElementById("result").innerHTML = ""; 
  }

  document.getElementById('submitQuizButton').addEventListener('click', submitQuiz);
  document.getElementById('resetQuizButton').addEventListener('click', resetQuiz);

  document.querySelectorAll('.drop-target').forEach(updateDropTargetState);
</script>
<script>
let pingTimeout;
let logoutTimer;
let warningTimer;
let countdownTimer;
let lastPing = 0;

const INACTIVITY_LIMIT = 15 * 60 * 1000; // 15 minutes
const WARNING_BEFORE_LOGOUT = 30 * 1000; // 30 seconds
const warningBox = document.getElementById("warningBox");
const countdownEl = document.getElementById("countdown");

function sendPing() {
    const now = Date.now();
    if (now - lastPing < 10000) return; 
    lastPing = now;
    fetch("/ping").catch(() => {});
}

function resetTimers() {
    clearTimeout(pingTimeout);
    clearTimeout(logoutTimer);
    clearTimeout(warningTimer);
    clearInterval(countdownTimer);

    warningBox.style.display = "none"; // üü° hide warning if active again

    sendPing();
    pingTimeout = setTimeout(sendPing, 60 * 1000);

    // Show warning 30s before logout
    warningTimer = setTimeout(() => {
        let remaining = 30;
        warningBox.style.display = "block";
        countdownEl.textContent = remaining;

        countdownTimer = setInterval(() => {
            remaining--;
            countdownEl.textContent = remaining;
            if (remaining <= 0) {
                clearInterval(countdownTimer);
            }
        }, 1000);
    }, INACTIVITY_LIMIT - WARNING_BEFORE_LOGOUT);

    // Auto logout
    logoutTimer = setTimeout(() => {
        fetch("/logout", { method: "POST" })
          .then(() => window.location.href = "/");
    }, INACTIVITY_LIMIT);
}

// Events
["mousemove", "keydown", "scroll", "click", "touchstart"].forEach(evt => {
    document.addEventListener(evt, resetTimers);
});

window.addEventListener("pageshow", sendPing);
window.addEventListener("beforeunload", sendPing);

resetTimers();
</script>


</body>
</html>