
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Lesen Teil 3</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Font Awesome for Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* ========================================= */
    /*        1. PROFESSIONAL VARIABLES          */
    /* ========================================= */
    :root {
      /* Palette */
      --primary: #1e293b;       
      --primary-soft: #e0e7ff;
      --bg-body: #f8fafc;       
      --surface: #ffffff;
      
      --text-main: #0f172a;     
      --text-muted: #64748b;    
      
      --success: #10b981;
      --success-bg: #ecfdf5;
      --error: #ef4444;
      --error-bg: #fef2f2;

      /* Dimensions */
      --radius: 12px;
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      
      --header-height: 60px;
      /* INCREASED HEIGHT FOR MOBILE SLIDER */
      --mobile-answer-height: 170px; 
    }

    *, *::before, *::after { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      margin: 0;
      padding: 0;
      background-color: var(--bg-body);
      color: var(--text-main);
      min-height: 100vh;
      line-height: 1.5;
    }

    /* ========================================= */
    /*           2. HEADER (FIXED)               */
    /* ========================================= */
    .header {
      position: fixed;
      top: 0; left: 0; width: 100%;
      height: var(--header-height);
      background: var(--primary);
      border-bottom: 1px solid rgba(0,0,0,0.08);
      color: var(--surface);
      z-index: 2000;
      display: flex; align-items: center; justify-content: center;
      font-weight: 800; font-size: 1.2rem;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
      margin: 0;
    }

    /* ========================================= */
    /*           3. LAYOUT CONTAINER             */
    /* ========================================= */
    .container {
      max-width: 1280px;
      margin: 0 auto;
      padding-top: calc(var(--header-height) + 30px);
      padding-bottom: 60px;
      padding-left: 20px; padding-right: 20px;
      display: flex;
      gap: 30px;
      align-items: flex-start;
    }

    /* ========================================= */
    /*        4. LEFT COLUMN (QUESTIONS)         */
    /* ========================================= */
    .left-column {
      width: 65%;
      flex-shrink: 0;
    }

    .quiz-scroll-container {
      background: transparent;
      padding: 0;
      box-shadow: none;
      max-height: none;
      overflow: visible;
    }

    .question-box {
      background: var(--surface);
      border-radius: var(--radius);
      padding: 25px;
      margin-bottom: 24px;
      box-shadow: var(--shadow);
      border: 1px solid #e2e8f0;
      border-left: 5px solid var(--primary);
    }

    .question-text {
      font-size: 1rem;
      color: #334155;
      margin-top: 15px;
    }
    
    .question-text h4 { margin-top: 0; color: var(--primary); margin-bottom: 8px; }

    /* DROP ZONES */
    .drop-target {
      background-color: #f1f5f9;
      border: 2px dashed #cbd5e1;
      border-radius: 10px;
      min-height: 60px;
      display: flex; align-items: center; justify-content: center;
      transition: all 0.2s;
      cursor: pointer;
      position: relative;
      margin-bottom: 15px;
    }

    .drop-target.empty-drop-target::before {
      content: "Hier Antwort ablegen";
      color: #94a3b8; font-size: 0.9rem; font-weight: 500;
      pointer-events: none;
    }

    .drop-target.drag-over {
      background-color: var(--primary-soft);
      border-color: var(--primary);
      transform: scale(1.01);
    }

    /* DROPPED ITEMS */
    .drop-target .draggable {
      background: transparent; border: none; box-shadow: none;
      width: 100%; margin: 0; padding: 5px;
      text-align: center; color: var(--primary); font-weight: 700;
      flex-direction: column;
    }

    /* ========================================= */
    /*        5. RIGHT COLUMN (ANSWERS)          */
    /* ========================================= */
    .right-column {
      width: 30%;
      position: sticky; 
      top: calc(var(--header-height) + 20px); 
      height: calc(100vh - 100px);
      z-index: 1000;
    }

    .right-column-content {
      background: var(--surface);
      padding: 15px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid #e2e8f0;
      max-height: 100%;
      overflow-y: auto;
    }

    /* DRAGGABLE CARDS */
    .draggable {
      background: white;
      border: 1px solid #e2e8f0;
      padding: 12px 15px;
      margin-bottom: 10px;
      border-radius: 8px;
      cursor: grab;
      font-size: 0.9rem; font-weight: 500; color: #334155;
      box-shadow: 0 1px 2px rgba(0,0,0,0.04);
      display: flex; align-items: flex-start; gap: 10px;
      user-select: none;
    }

    .draggable.selected {
      background-color: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    /* CHECKBOX Styling */
    .wrong-flag {
      width: 18px; height: 18px;
      margin-top: 3px;
      flex-shrink: 0;
      cursor: pointer;
      accent-color: var(--error);
    }

    /* ========================================= */
    /*        6. FEEDBACK & BUTTONS              */
    /* ========================================= */
    .drop-target.correct { background: var(--success-bg) !important; border-color: var(--success) !important; }
    .drop-target.correct .draggable { color: #065f46 !important; }
    .drop-target.incorrect { background: var(--error-bg) !important; border-color: var(--error) !important; }
    .drop-target.incorrect .draggable { color: #991b1b !important; }

    /* Buttons */
    .button-container { display: flex; justify-content: center; gap: 15px; margin-top: 40px; margin-bottom: 40px;}
    
    .quiz-button {
      background: var(--text-main); color: white;
      padding: 14px 28px; border-radius: 50px;
      font-weight: 600; border: none; cursor: pointer;
      display: flex; align-items: center; gap: 8px; font-size: 1rem;
      transition: all 0.2s;
      box-shadow: var(--shadow);
      text-decoration: none;
    }
    
    .quiz-button.secondary {
      background: white; color: var(--text-main); border: 1px solid #cbd5e1;
    }

    #result { text-align: center; margin-top: 20px; font-weight: bold; padding: 20px; background: white; border-radius: var(--radius); box-shadow: var(--shadow); }

    /* ========================================= */
    /*           7. MOBILE RESPONSIVE            */
    /* ========================================= */
    @media (max-width: 991px) {
      
      .header { font-size: 1rem; padding: 0 10px; }

      .container {
        flex-direction: column;
        padding: 0;
        /* Padding Top = Header + Bigger AnswerBar + Gap */
        padding-top: calc(var(--header-height) + var(--mobile-answer-height) + 25px);
      }

      /* 1. ANSWER BAR (FIXED TOP HORIZONTAL SLIDER) */
      .right-column {
        position: fixed;
        top: var(--header-height);
        left: 0; width: 100%;
        height: var(--mobile-answer-height);
        z-index: 1500;
        
        background: #f8fafc; /* Match body bg */
        border-bottom: 1px solid rgba(0,0,0,0.1);
        box-shadow: 0 4px 10px -2px rgba(0,0,0,0.05);
      }

      .right-column-content {
        display: flex; 
        flex-direction: row; 
        gap: 12px;
        /* Increased padding inside the slider to prevent clipping */
        padding: 15px 15px;
        
        height: 100%; width: 100%;
        background: transparent;
        border: none; box-shadow: none; border-radius: 0;
        
        overflow-x: auto; 
        overflow-y: hidden;
        white-space: normal;
        scroll-snap-type: x mandatory;
        align-items: center; /* Center vertically */
      }
      .right-column-content::-webkit-scrollbar { display: none; }

      /* Mobile Draggable Cards */
      .draggable {
        flex: 0 0 auto;
        width: 250px; /* Slightly wider */
        height: calc(100% - 10px); /* Leave room for shadow */
        margin: 0;
        
        display: flex; 
        align-items: flex-start; /* Align text top */
        justify-content: center; 
        text-align: left;
        
        font-size: 0.8rem;
        padding: 10px;
        scroll-snap-align: center;
        border: 1px solid #e2e8f0;
        background: white;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
      }
      
      .draggable input.wrong-flag {
          margin-top: 2px; /* Fix checkbox alignment */
      }

      /* 2. Questions */
      .left-column { width: 100%; padding: 0 15px; }
      .question-box { padding: 20px; }

      /* 3. Buttons */
      .button-container { flex-direction: column; padding: 0 15px; gap: 10px; }
      .quiz-button { width: 100%; justify-content: center; }
    }
  </style>
</head>
<body>

<div class="header">Lesen Teil 3: Apotheker</div>

<div class="container">
  <div class="left-column">
    <div class="quiz-scroll-container">
      <!-- Questions A-->
      <div class="question-box" data-correct="Ihre Bekannte hat Fieber, m√∂chte aber keine Tabletten nehmen.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h4>Ratgeber Was bei Erk√§ltung hilft</h4>
           Erk√§ltungen geh√∂ren leider zum Leben. Sie kommen immer wieder wie Fr√ºhling. Sommer, Herbst und Winter. Jetzt ist wieder Erk√§ltungssaison. Hier sind einige wichtige Tipps. Bei Fieber. mindestens 2-3 Liter Tee oder Wasser pro Tag trinken. Feuchte Wadenwickel k√∂nnen helfen. Ist das Fieber nach zwei Tagen nicht weg. unbedingt zum Arzt gehen. Bei Halsweh mit Salzwasser gurgeln (1 Glas Wasser ein Teel√∂ffel Salze) oder Salbeitee trinken.
            
        </div>
      </div>
    <!-- Questions B-->
      <div class="question-box" data-correct="__NO_CORRECT_ANSWER__">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h4>Wir zeigen den kosten die Z√§hne!</h4>
            F√ºr alle, die noch viel vorhaben: Sichern Sie sich Top-Leistung zu Top-Konditionen! Genie√üen Sie den ma√ügeschneiderten privaten Versicherungsschutz f√ºr Z√§hne und die zuverl√§ssige Sicherheit der WORMSER. Da lohnt sich der Wechsel: bis zum 31.12. handeln und dauerhaft von Beitrags Vorteil profitieren. Ein Leben lang!
            <p>Mehr Informationen kostenfrei unter 0700/4332000.</p>
        </div>
      </div>
      <!-- Questions C-->
      <div class="question-box" data-correct="Sie bekommen Besuch und m√∂chten am Sonntagvormittag etwas Interessantes unternehmen.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            Kochen und waschen um 1900 lautet das Thema, wenn Anita Kr√§mer am kommenden Sonntag durch das Museum f√ºr Stadtgeschichte f√ºhrt. Wie wurde damals gekocht und gewaschen? Wie haben unsere Ur- Ur- Gro√üeltern damals gelebt? K√ºhlschrank. Mikrowelle und andere moderne Ger√§te gab es ja in jener Zeit noch nicht. Wie hat man Speisen haltbar gemacht? Wie wurde geb√ºgelt? Auf all diese Fragen hat Frau Kr√§mer eine Antwort. Auch Kinder sind herzlich willkommen. Sie werden auch erfahren. wie oft Kinder damals gewaschen wurden. Wie sah es mit der Zahnpflege aus? Eine spannende und unterhaltsame Reise in die Zeit von vor 100 Jahren. Der Eintritt ist frei. Die F√ºhrung findet immer in Gruppen von 10 Personen ab 10 Uhr zu jeder vollen Stunde statt.
            <p>Museum f√ºr Stadtgeschichte. Alte Waldstra√üe 11.</p>
        </div>
      </div>
      <!-- Questions D-->
      <div class="question-box" data-correct="__NO_CORRECT_ANSWER__">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h4>Lesen, was gesund macht jetzt in der neuen Apotheken-Revue:</h4>
            <p>- Ohrprobleme: endlich wieder gut h√∂ren!</p>
            <p>- Hautpflege: gut gesch√ºtzt durch jede Jahreszeit</p>
            <p>- Kampo: heilen mit traditioneller japanischer Medizin</p>
            Diese und noch viele weitere interessante Themen rund um Ihre Gesundheit. plus R√§tselspa√ü und tollen Gewinnspiel.
            Alle 14 Tage neu in Ihrer Apotheke. Kostenlos!
        </div>
      </div>
      <!-- Questions E-->
      <div class="question-box" data-correct="Das Ehepaar, das unter Ihnen wohnt, m√∂chte etwas √ºber Computer lernen.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h4>Nachhilfe</h4>
            Wenn es um den Computer geht. wissen viele Kinder l√§ngst besser Bescheid als Erwachsene. Fast die H√§lfte (47%) der 10- bis 19-J√§hrigen. in deren Haushalt ein Computer steht wird vom Vater. Mutter. Aber auch von Oma und Opa um Rat gefragt. In der Heinrich-Mann-Schule geben computerbegeisterte Sch√ºler jetzt jeden Samstag von 10-12 Uhr sogar extra Nachhilfekurse f√ºr Erwachsene. Start ist am kommenden Samstag, der Sch√ºlerservice ist kostenlos! Interessierte Sch√ºlerinnen und Sch√ºler. die ihre Erfahrungen weitergeben m√∂chten. k√∂nnen auch gern vorbeikommen und mitmachen.
        </div>
      </div>
      <!-- Questions F-->
      <div class="question-box" data-correct="Sie m√∂chten eine Versicherung f√ºr Ihren Neuwagen abschlie√üen und sofort wissen. was es kostet.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h4>Vienna CONEKT</h4>
            Versichern Sie Ihr Auto ab 35 Cent am Tag. Sparen Sie zus√§tzlich mit dem Bonusprogramm und bleiben Sie flexibel:
            <p>Sie k√∂nnen jederzeit monatlich k√ºndigen.</p>   
            <p>Jetzt Beitrag direkt berechnen:</p>
            <h5>vienna- conekt.de</h5> 
            <h5>018084-33556474</h5>    
            Mit der Vienna Conekt haben sie direkt mehr Vorteile: immer g√ºnstig, immer erreichbar (24-Stunden-Schaden-hotline). Ersatzwagengarantie!   
        </div>
      </div>
      <!-- Questions G-->
      <div class="question-box" data-correct="Sie haben ein Haustier, das im letzten Jahr viel Geld f√ºr den Tierarzt gekostet hat. Sie suchen eine M√∂glichkeit, Kosten zu sparen.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h4>Sofort-Versicherung</h4>
            <p>Die Behandlung kommt vom Arzt.</p>
            <p>Die F√ºrsorge von ihnen.</p>
            <p>Die Finanzspritze von uns.</p>
            <p>Der umfassende Schutz bei Krankheit und Unfall.</p>
            <p>Auch liebe kann nicht verhindern. dass Ihr Haustier mal krank wird oder einen Unfall hat.</p>
            <p>Die dadurch notwendige Behandlung oder Operation kann schnell bis zu 1000 Euro kosten.</p>
            Die neue care-securitas Tierschutzversicherung sch√ºtzt Sie vor diesem Risiko. K√ºmmern Sie sich also um Ihren vierbeinigen Patienten - wir k√ºmmern uns um die Kosten. Weitere Informationen unter: www.care-securitas.de
        </div>
      </div>
      <!-- Questions H-->
      <div class="question-box" data-correct="__NO_CORRECT_ANSWER__">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
          <h4>Kindertheater</h4> 
          <p>warum teilen schwer und betteln grausam ist ?</p>
          Dass es viel einfacher ist, egoistisch zu sein als mitf√ºhlend, wei√ü fast jeder. Dass aber auch Menschen, die Hilfe brauchen. der egoistisch sein k√∂nnen. zeig das St√ºck "Cer gute Mensch von Sezuan" von Bertolt Brecht. Und er erz√§hlt es so. dass auch Kinder es verstehen k√∂nnen. Im Theater an der Parkaue wir das St√ºck am Sonntag um 14 Uhr in der Originalfassung gezeigt. Regisseurin Claudia Kipfel: "Dieses St√ºck kann man so lassen, wie es ist. Kinder verstehen es sofort."
          <P>Karten: 0179-666453110. f√ºr Kinder ab 8 Jahren.</P>
          <P>Preise: 12 Euro. Kinder bis 12 Jahre: 7 Euro.</P>
        </div>
      </div>
      <!-- Questions I-->
      <div class="question-box" data-correct="Ihre Nachbarin ist seit einer Woche erk√§ltet. Nat√ºrliche Heilmittel haben nicht geholfen.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h4>Omnitamol 500 Tabletten</h4>
            <p>Wann nehmen Sie Omnitamol?</p>
            <p>Bei leichten bis m√§√üig starkes Schmerzen.</p>
            <p>Bei Fieber und Erk√§ltungen.</p>
            Wichtig: Nehmen Sie Omnitamol nur 3-4 Tage ein, danach gehen Sie bitte unbedingt zu Ihrem Arzt oder Zahnarzt. wenn ihre Beschwerden sich nicht gebessert haben.
            <p>Was ist bei Kindern zu ber√ºcksichtigen?</p>
            <p>Omnitamol 500 Tabletten sind nicht geeignet f√ºr Kinder unter 6 Jahren.</p>
            <p>Fragen Sie Ihren Arzt oder Apotheker.</p>
          </div>
      </div>
      <!-- Questions J-->
      <div class="question-box" data-correct="Ein Kollege hat seit ein paar Tagen Hautprobleme und wei√ü nicht, was die Ursache sein k√∂nnte.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h4>Neue Kleidung kann krank machen</h4>
            Das neue Hemd passt prima zu Lieblingsjeans. Warum also nicht gleich anziehen? Doch Vorsicht: Neue Textilien k√∂nnen Allergien und Hautreizungen ausl√∂sen. vor allem bei Kindern und Menschen mit empfindlicher Haut. Grund: Viele Textilien enthalten Farbstoffe oder andere Chemikalien. Tipp: neue Kleidungsst√ºcke vor dem ersten Tragen waschen. F√ºr Babys und Kleinkinder ist Second-Hand-Kleidung eine gute Alternative. da die Schadstoffe schon ausgewaschen sind.
        </div>
      </div>
        <!-- Questions K-->
      <div class="question-box" data-correct="Sie m√∂chten etwas mit ihrer 7-j√§hrigen Tochter Unternehmen.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h4>Erk√§ltungszeit = Theaterzeit</h4>
            Zu einem hoffentlich husten- und schnupfenfreien Nachmittag f√ºr die ganze Familie l√§dt das Puppentheater "Die Langohren- am morgigen Sonntag um 15 Uhr ein. Das Ensemble um die professionelle Puppenspielerin Margit Hallmann spielt "H√§tschi. kleine Anna" und verspricht ein Theatererlebnis f√ºr Erwachsene und Kinder ab 6 Jahren.
            <p>Die Veranstaltung ist fast ausverkauft.</p>
            <p>Es gibt noch Restkarten.</p>
            <p>Tickets unter Telefon (0564) 5404420</p>
        </div>
      </div>
      <!-- Questions L-->
      <div class="question-box" data-correct="Sie wollen Informationen √ºber eine Zahnversicherung. ohne telefonieren zu m√ºssen.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h4>Zusatz-Versicherung</h4>
            <p>Liebe Leserin, lieber Leser, </p>
            gepflegte Z√§hne h√§ngen oft von den finanziellen M√∂glichkeiten des Patienten ab. Mit der Krankenkasse alleine kommt oft nicht weit. Mit der DENTAL VERSICHEUNG 100 Plus von Warnst√§dtHyper verdoppeln Sie bei Zahnersatz den Zuschuss Ihrer gesetzlichen Krankenkasse. Keine Altersbegrenzung. G√ºnstige Monatsbeitr√§ge. Nutzen Sie noch heute diese wichtigen Vorteile.
            <p>Rufen sie an: 069-780086753 oder informieren Sie sich im Internet unter www.neue-zaehne.eu.</p>
            <p>Wir schicken Ihnen die Unterlagen zu.</p>
          </div>
      </div>
    </div>
  </div>

  <div class="right-column">
    <!-- MODIFIED: Added ondragover and ondrop to make this a droppable area -->
    <div class="right-column-content" onclick="clearSelected()" ondragover="allowDrop(event)" ondrop="dropOnAnswersContainer(event)">
      <!-- Answers -->
      <div class="draggable" draggable="true" id="a1" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Ein Kollege hat seit ein paar Tagen Hautprobleme und wei√ü nicht, was die Ursache sein k√∂nnte.
      </div>
      <div class="draggable" draggable="true" id="a2" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Sie m√∂chten etwas mit ihrer 7-j√§hrigen Tochter Unternehmen.
      </div>
      <div class="draggable" draggable="true" id="a3" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Ihre Bekannte hat Fieber, m√∂chte aber keine Tabletten nehmen.
      </div>
      <div class="draggable" draggable="true" id="a4" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Das Ehepaar, das unter Ihnen wohnt, m√∂chte etwas √ºber Computer lernen.
      </div>
      <div class="draggable" draggable="true" id="a5" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Sie wollen Informationen √ºber eine Zahnversicherung. ohne telefonieren zu m√ºssen.
      </div>
      <div class="draggable" draggable="true" id="a6" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Ihre Nachbarin ist seit einer Woche erk√§ltet. Nat√ºrliche Heilmittel haben nicht geholfen.
      </div>
      <div class="draggable" draggable="true" id="a7" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Sie bekommen Besuch und m√∂chten am Sonntagvormittag etwas Interessantes unternehmen.
      </div>
      <div class="draggable" draggable="true" id="a8" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Ihre Freundin interessiert sich f√ºr japanische Medizin. Sie suchen als Geburtstagsgeschenk ein Buch zu diesem Thema.
      </div>
      <div class="draggable" draggable="true" id="a9" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Sie haben ein Haustier, das im letzten Jahr viel Geld f√ºr den Tierarzt gekostet hat. Sie suchen eine M√∂glichkeit, Kosten zu sparen.
      </div>
      <div class="draggable" draggable="true" id="a10" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Sie m√∂chten eine Versicherung f√ºr Ihren Neuwagen abschlie√üen und sofort wissen. was es kostet.
      </div>
    </div>
  </div>
</div>


<div id="result"></div>
<div class="button-container">
    <button id="submitQuizButton" class="quiz-button">
      <i class="fas fa-paper-plane"></i> Abschicken
    </button>
    <button id="resetQuizButton" class="quiz-button secondary">
      <i class="fas fa-redo"></i> Zur√ºcksetzen
    </button>
    <!-- Changed to <a> tag for navigation, href to a generic "index.html" or "#" -->
    <a href="/b2_exam.html" id="homeButton" class="quiz-button secondary" role="button">
      <i class="fas fa-home"></i> Startseite
    </a>
  </div>

<script>
  let selectedAnswer = null;
  const rightColumnContent = document.querySelector(".right-column-content");
  const originalAnswerOrder = Array.from(rightColumnContent.querySelectorAll('.draggable')); // Store initial order for reset

  // MODIFIED: allowDrop to correctly identify parent droppable container
  function allowDrop(ev) {
    ev.preventDefault();
    let droppableContainer = ev.target;
    // Traverse up to find the actual droppable container (.drop-target or .right-column-content)
    while (droppableContainer && droppableContainer !== document.body &&
           !droppableContainer.classList.contains("drop-target") &&
           !droppableContainer.classList.contains("right-column-content")) {
        droppableContainer = droppableContainer.parentElement;
    }

    if (droppableContainer && (droppableContainer.classList.contains("drop-target") || droppableContainer.classList.contains("right-column-content"))) {
        droppableContainer.classList.add("drag-over");
    }
  }

  function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.id);
    ev.target.classList.add("dragging");
  }

  document.addEventListener('dragleave', function(event) {
    if (event.target.classList && (event.target.classList.contains("drop-target") || event.target.classList.contains("right-column-content"))) {
        if (!event.target.contains(event.relatedTarget) && event.target !== event.relatedTarget) {
             event.target.classList.remove("drag-over");
        } else if (event.relatedTarget === null) { 
            event.target.classList.remove("drag-over");
        }
    }
  }, false);
  
  document.addEventListener('dragend', function(event) {
    if (event.target.classList && event.target.classList.contains('draggable')) {
      event.target.classList.remove('dragging');
    }
    document.querySelectorAll('.drop-target.drag-over, .right-column-content.drag-over').forEach(el => {
        el.classList.remove('drag-over');
    });
  });

  // MODIFIED: drop function for question slots
  function drop(ev) {
    ev.preventDefault();
    const draggedId = ev.dataTransfer.getData("text");
    const draggedEl = document.getElementById(draggedId);
    let dropTarget = ev.target;

    while (dropTarget && !dropTarget.classList.contains("drop-target")) {
        dropTarget = dropTarget.parentElement;
    }
    
    if (!dropTarget || !draggedEl) return;

    dropTarget.classList.remove("drag-over");

    const originalParentOfDraggedEl = draggedEl.parentElement; 

    const currentAnswerInTarget = dropTarget.querySelector(".draggable");
    if (currentAnswerInTarget && currentAnswerInTarget !== draggedEl) {
      rightColumnContent.appendChild(currentAnswerInTarget);
      showCheckbox(currentAnswerInTarget);
    }
    
    dropTarget.innerHTML = ""; 
    dropTarget.appendChild(draggedEl);
    hideCheckbox(draggedEl);
    updateDropTargetState(dropTarget);

    if (originalParentOfDraggedEl &&
        originalParentOfDraggedEl.classList.contains("drop-target") &&
        originalParentOfDraggedEl !== dropTarget) {
        updateDropTargetState(originalParentOfDraggedEl);
    }

    if (selectedAnswer === draggedEl) {
        draggedEl.classList.remove("selected");
        selectedAnswer = null;
    }
  }

  // NEW: Function to handle drops onto the answers container
  function dropOnAnswersContainer(ev) {
    ev.preventDefault();
    const draggedId = ev.dataTransfer.getData("text");
    const draggedEl = document.getElementById(draggedId);
    const answersContainer = ev.currentTarget; 

    if (!draggedEl || !answersContainer) return;

    answersContainer.classList.remove("drag-over");

    const originalParentOfDraggedEl = draggedEl.parentElement; 

    answersContainer.appendChild(draggedEl);
    showCheckbox(draggedEl);

    if (originalParentOfDraggedEl && originalParentOfDraggedEl.classList.contains("drop-target")) {
        updateDropTargetState(originalParentOfDraggedEl);
    }

    if (selectedAnswer === draggedEl) {
        draggedEl.classList.remove("selected");
        selectedAnswer = null;
    }
  }


  function hideCheckbox(el) {
    const checkbox = el.querySelector(".wrong-flag");
    if (checkbox) checkbox.style.display = "none";
  }

  function showCheckbox(el) {
    const checkbox = el.querySelector(".wrong-flag");
    if (checkbox) checkbox.style.display = "inline-block";
  }

  function selectAnswer(el, event) {
    event.stopPropagation(); 
    if (selectedAnswer === el) { 
      el.classList.remove("selected");
      selectedAnswer = null;
    } else {
      if (selectedAnswer) selectedAnswer.classList.remove("selected");
      selectedAnswer = el;
      el.classList.add("selected");
    }
  }

  // MODIFIED: clickDrop function
  function clickDrop(targetDropzone) {
    if (selectedAnswer) {
      const originalParentOfSelectedAnswer = selectedAnswer.parentElement;

      const currentAnswerInDropzone = targetDropzone.querySelector(".draggable");
      if (currentAnswerInDropzone && currentAnswerInDropzone !== selectedAnswer) {
        rightColumnContent.appendChild(currentAnswerInDropzone);
        showCheckbox(currentAnswerInDropzone);
      }
      
      targetDropzone.innerHTML = ""; 
      targetDropzone.appendChild(selectedAnswer);
      hideCheckbox(selectedAnswer);
      updateDropTargetState(targetDropzone);

      if (originalParentOfSelectedAnswer &&
          originalParentOfSelectedAnswer.classList.contains("drop-target") &&
          originalParentOfSelectedAnswer !== targetDropzone) {
          updateDropTargetState(originalParentOfSelectedAnswer);
      }

      selectedAnswer.classList.remove("selected");
      selectedAnswer = null;
    }
  }

  function clearSelected() {
    if (selectedAnswer) {
      selectedAnswer.classList.remove("selected");
      selectedAnswer = null;
    }
  }

  function updateDropTargetState(dropTarget) {
    if (!dropTarget || !dropTarget.classList.contains('drop-target')) return;
    
    if (dropTarget.querySelector(".draggable")) {
      dropTarget.classList.remove("empty-drop-target");
    } else {
      dropTarget.classList.add("empty-drop-target");
    }
  }

  function getDraggableText(draggableElement) {
    const clone = draggableElement.cloneNode(true);
    const checkbox = clone.querySelector('.wrong-flag');
    if (checkbox) {
        checkbox.remove();
    }
    return clone.textContent.trim();
  }

  function submitQuiz() {
    let total = 0, correct = 0;
    document.querySelectorAll('.question-box').forEach((box) => {
      total++;
      const correctAnswerText = box.getAttribute("data-correct").trim();
      const dropTarget = box.querySelector(".drop-target");
      const droppedDraggable = dropTarget.querySelector(".draggable");
      
      dropTarget.classList.remove("correct", "incorrect"); 

      if (droppedDraggable) { 
        const selectedText = getDraggableText(droppedDraggable); 
        if (correctAnswerText === "__NO_CORRECT_ANSWER__") {
          dropTarget.classList.add("incorrect");
        } else {
          if (selectedText === correctAnswerText) {
            dropTarget.classList.add("correct");
            correct++;
          } else {
            dropTarget.classList.add("incorrect");
          }
        }
      } else { 
        if (correctAnswerText !== "__NO_CORRECT_ANSWER__") {
          dropTarget.classList.add("incorrect");
        }
      }
      updateDropTargetState(dropTarget); 
    });

    let wrongMarkedCorrect = 0, wrongMarkedTotal = 0;
    rightColumnContent.querySelectorAll('.draggable').forEach((answerEl) => {
      const text = getDraggableText(answerEl); 
      const checkbox = answerEl.querySelector('.wrong-flag');
      
      const isACorrectAnswerOptionForAnyQuestion = Array.from(document.querySelectorAll('.question-box'))
        .some(box => {
            const qCorrectText = box.getAttribute('data-correct').trim();
            return qCorrectText !== "__NO_CORRECT_ANSWER__" && qCorrectText === text;
        });
      
      if (!isACorrectAnswerOptionForAnyQuestion) { 
        wrongMarkedTotal++; 
        if (checkbox.checked) {
          wrongMarkedCorrect++; 
        }
      }
    });

    const questionsWithNoAnswer = Array.from(document.querySelectorAll('.question-box'))
                                      .filter(box => box.getAttribute('data-correct').trim() === "__NO_CORRECT_ANSWER__").length;
    const scorableTotal = total - questionsWithNoAnswer;


    const resultDiv = document.getElementById("result");
    resultDiv.innerHTML =
      `<span class="correct-count">‚úÖ ${correct}</span> von <span class="total-count">${scorableTotal}</span> bewertbaren Fragen richtig. | ` + 
      `<span class="marked-wrong-count">üö´ Falsch-Antworten korrekt markiert: ${wrongMarkedCorrect}</span> von ${wrongMarkedTotal}.`;
  }

  function resetQuiz() {
    document.querySelectorAll('.drop-target').forEach(dt => {
        const draggable = dt.querySelector('.draggable');
        if (draggable) {
            rightColumnContent.appendChild(draggable); 
            showCheckbox(draggable); 
        }
        dt.innerHTML = ''; 
        dt.classList.remove('correct', 'incorrect'); 
        updateDropTargetState(dt); 
    });

    rightColumnContent.innerHTML = ''; 
    originalAnswerOrder.forEach(draggable => {
        rightColumnContent.appendChild(draggable); 
        draggable.classList.remove('selected', 'dragging'); 
        showCheckbox(draggable); 
        const checkbox = draggable.querySelector('.wrong-flag');
        if (checkbox) checkbox.checked = false; 
    });
    
    if (selectedAnswer) {
      selectedAnswer.classList.remove('selected');
      selectedAnswer = null;
    }

    document.getElementById("result").innerHTML = ""; 
  }

  document.getElementById('submitQuizButton').addEventListener('click', submitQuiz);
  document.getElementById('resetQuizButton').addEventListener('click', resetQuiz);

  document.querySelectorAll('.drop-target').forEach(updateDropTargetState);
</script>
<script>
let pingTimeout;
let logoutTimer;
let warningTimer;
let countdownTimer;
let lastPing = 0;

const INACTIVITY_LIMIT = 15 * 60 * 1000; // 15 minutes
const WARNING_BEFORE_LOGOUT = 30 * 1000; // 30 seconds
const warningBox = document.getElementById("warningBox");
const countdownEl = document.getElementById("countdown");

function sendPing() {
    const now = Date.now();
    if (now - lastPing < 10000) return; 
    lastPing = now;
    fetch("/ping").catch(() => {});
}

function resetTimers() {
    clearTimeout(pingTimeout);
    clearTimeout(logoutTimer);
    clearTimeout(warningTimer);
    clearInterval(countdownTimer);

    warningBox.style.display = "none"; // üü° hide warning if active again

    sendPing();
    pingTimeout = setTimeout(sendPing, 60 * 1000);

    // Show warning 30s before logout
    warningTimer = setTimeout(() => {
        let remaining = 30;
        warningBox.style.display = "block";
        countdownEl.textContent = remaining;

        countdownTimer = setInterval(() => {
            remaining--;
            countdownEl.textContent = remaining;
            if (remaining <= 0) {
                clearInterval(countdownTimer);
            }
        }, 1000);
    }, INACTIVITY_LIMIT - WARNING_BEFORE_LOGOUT);

    // Auto logout
    logoutTimer = setTimeout(() => {
        fetch("/logout", { method: "POST" })
          .then(() => window.location.href = "/");
    }, INACTIVITY_LIMIT);
}

// Events
["mousemove", "keydown", "scroll", "click", "touchstart"].forEach(evt => {
    document.addEventListener(evt, resetTimers);
});

window.addEventListener("pageshow", sendPing);
window.addEventListener("beforeunload", sendPing);

resetTimers();
</script>


</body>
</html>