
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Lesen Teil 3</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Font Awesome for Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* ========================================= */
    /*        1. PROFESSIONAL VARIABLES          */
    /* ========================================= */
    :root {
      /* Palette */
      --primary: #1e293b;       
      --primary-soft: #e0e7ff;
      --bg-body: #f8fafc;       
      --surface: #ffffff;
      
      --text-main: #0f172a;     
      --text-muted: #64748b;    
      
      --success: #10b981;
      --success-bg: #ecfdf5;
      --error: #ef4444;
      --error-bg: #fef2f2;

      /* Dimensions */
      --radius: 12px;
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      
      --header-height: 60px;
      /* INCREASED HEIGHT FOR MOBILE SLIDER */
      --mobile-answer-height: 170px; 
    }

    *, *::before, *::after { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      margin: 0;
      padding: 0;
      background-color: var(--bg-body);
      color: var(--text-main);
      min-height: 100vh;
      line-height: 1.5;
    }

    /* ========================================= */
    /*           2. HEADER (FIXED)               */
    /* ========================================= */
    .header {
      position: fixed;
      top: 0; left: 0; width: 100%;
      height: var(--header-height);
      background: var(--primary);
      border-bottom: 1px solid rgba(0,0,0,0.08);
      color: var(--surface);
      z-index: 2000;
      display: flex; align-items: center; justify-content: center;
      font-weight: 800; font-size: 1.2rem;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
      margin: 0;
    }

    /* ========================================= */
    /*           3. LAYOUT CONTAINER             */
    /* ========================================= */
    .container {
      max-width: 1280px;
      margin: 0 auto;
      padding-top: calc(var(--header-height) + 30px);
      padding-bottom: 60px;
      padding-left: 20px; padding-right: 20px;
      display: flex;
      gap: 30px;
      align-items: flex-start;
    }

    /* ========================================= */
    /*        4. LEFT COLUMN (QUESTIONS)         */
    /* ========================================= */
    .left-column {
      width: 65%;
      flex-shrink: 0;
    }

    .quiz-scroll-container {
      background: transparent;
      padding: 0;
      box-shadow: none;
      max-height: none;
      overflow: visible;
    }

    .question-box {
      background: var(--surface);
      border-radius: var(--radius);
      padding: 25px;
      margin-bottom: 24px;
      box-shadow: var(--shadow);
      border: 1px solid #e2e8f0;
      border-left: 5px solid var(--primary);
    }

    .question-text {
      font-size: 1rem;
      color: #334155;
      margin-top: 15px;
    }
    
    .question-text h4 { margin-top: 0; color: var(--primary); margin-bottom: 8px; }

    /* DROP ZONES */
    .drop-target {
      background-color: #f1f5f9;
      border: 2px dashed #cbd5e1;
      border-radius: 10px;
      min-height: 60px;
      display: flex; align-items: center; justify-content: center;
      transition: all 0.2s;
      cursor: pointer;
      position: relative;
      margin-bottom: 15px;
    }

    .drop-target.empty-drop-target::before {
      content: "Hier Antwort ablegen";
      color: #94a3b8; font-size: 0.9rem; font-weight: 500;
      pointer-events: none;
    }

    .drop-target.drag-over {
      background-color: var(--primary-soft);
      border-color: var(--primary);
      transform: scale(1.01);
    }

    /* DROPPED ITEMS */
    .drop-target .draggable {
      background: transparent; border: none; box-shadow: none;
      width: 100%; margin: 0; padding: 5px;
      text-align: center; color: var(--primary); font-weight: 700;
      flex-direction: column;
    }

    /* ========================================= */
    /*        5. RIGHT COLUMN (ANSWERS)          */
    /* ========================================= */
    .right-column {
      width: 30%;
      position: sticky; 
      top: calc(var(--header-height) + 20px); 
      height: calc(100vh - 100px);
      z-index: 1000;
    }

    .right-column-content {
      background: var(--surface);
      padding: 15px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid #e2e8f0;
      max-height: 100%;
      overflow-y: auto;
    }

    /* DRAGGABLE CARDS */
    .draggable {
      background: white;
      border: 1px solid #e2e8f0;
      padding: 12px 15px;
      margin-bottom: 10px;
      border-radius: 8px;
      cursor: grab;
      font-size: 0.9rem; font-weight: 500; color: #334155;
      box-shadow: 0 1px 2px rgba(0,0,0,0.04);
      display: flex; align-items: flex-start; gap: 10px;
      user-select: none;
    }

    .draggable.selected {
      background-color: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    /* CHECKBOX Styling */
    .wrong-flag {
      width: 18px; height: 18px;
      margin-top: 3px;
      flex-shrink: 0;
      cursor: pointer;
      accent-color: var(--error);
    }

    /* ========================================= */
    /*        6. FEEDBACK & BUTTONS              */
    /* ========================================= */
    .drop-target.correct { background: var(--success-bg) !important; border-color: var(--success) !important; }
    .drop-target.correct .draggable { color: #065f46 !important; }
    .drop-target.incorrect { background: var(--error-bg) !important; border-color: var(--error) !important; }
    .drop-target.incorrect .draggable { color: #991b1b !important; }

    /* Buttons */
    .button-container { display: flex; justify-content: center; gap: 15px; margin-top: 40px; margin-bottom: 40px;}
    
    .quiz-button {
      background: var(--text-main); color: white;
      padding: 14px 28px; border-radius: 50px;
      font-weight: 600; border: none; cursor: pointer;
      display: flex; align-items: center; gap: 8px; font-size: 1rem;
      transition: all 0.2s;
      box-shadow: var(--shadow);
      text-decoration: none;
    }
    
    .quiz-button.secondary {
      background: white; color: var(--text-main); border: 1px solid #cbd5e1;
    }

    #result { text-align: center; margin-top: 20px; font-weight: bold; padding: 20px; background: white; border-radius: var(--radius); box-shadow: var(--shadow); }

    /* ========================================= */
    /*           7. MOBILE RESPONSIVE            */
    /* ========================================= */
    @media (max-width: 991px) {
      
      .header { font-size: 1rem; padding: 0 10px; }

      .container {
        flex-direction: column;
        padding: 0;
        /* Padding Top = Header + Bigger AnswerBar + Gap */
        padding-top: calc(var(--header-height) + var(--mobile-answer-height) + 25px);
      }

      /* 1. ANSWER BAR (FIXED TOP HORIZONTAL SLIDER) */
      .right-column {
        position: fixed;
        top: var(--header-height);
        left: 0; width: 100%;
        height: var(--mobile-answer-height);
        z-index: 1500;
        
        background: #f8fafc; /* Match body bg */
        border-bottom: 1px solid rgba(0,0,0,0.1);
        box-shadow: 0 4px 10px -2px rgba(0,0,0,0.05);
      }

      .right-column-content {
        display: flex; 
        flex-direction: row; 
        gap: 12px;
        /* Increased padding inside the slider to prevent clipping */
        padding: 15px 15px;
        
        height: 100%; width: 100%;
        background: transparent;
        border: none; box-shadow: none; border-radius: 0;
        
        overflow-x: auto; 
        overflow-y: hidden;
        white-space: normal;
        scroll-snap-type: x mandatory;
        align-items: center; /* Center vertically */
      }
      .right-column-content::-webkit-scrollbar { display: none; }

      /* Mobile Draggable Cards */
      .draggable {
        flex: 0 0 auto;
        width: 250px; /* Slightly wider */
        height: calc(100% - 10px); /* Leave room for shadow */
        margin: 0;
        
        display: flex; 
        align-items: flex-start; /* Align text top */
        justify-content: center; 
        text-align: left;
        
        font-size: 0.8rem;
        padding: 10px;
        scroll-snap-align: center;
        border: 1px solid #e2e8f0;
        background: white;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
      }
      
      .draggable input.wrong-flag {
          margin-top: 2px; /* Fix checkbox alignment */
      }

      /* 2. Questions */
      .left-column { width: 100%; padding: 0 15px; }
      .question-box { padding: 20px; }

      /* 3. Buttons */
      .button-container { flex-direction: column; padding: 0 15px; gap: 10px; }
      .quiz-button { width: 100%; justify-content: center; }
    }
  </style>
</head>
<body>

<div class="header">Lesen Teil 3: Kein Zeit</div>

<div class="container">
  <div class="left-column">
    <div class="quiz-scroll-container">
      <!-- Questions A-->
      <div class="question-box" data-correct="Sie m√∂chten mit Ihrer zw√∂lfj√§hrigen Tochter ein altersgerechtes Theaterst√ºck sehen.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h4>Theater Marabu</h4>
            In Pollekes elfj√§hrigem Leben scheint im Augenblick etwas falsch zu laufen. Es st√∂rt sie ja gar nicht, dass ihre Eltern geschieden sind. Sie hat ihren Papa sehr lieb, und sie hat eine prima Mama. Ihr Lehrer ist eigentlich auch ganz in Ordnung, aber muss der sich gleich in ihre Mama verlieben? Und dann ist Polleke sogar selbst schuld an allem. Aber sie gibt die Hoffnung nicht auf, dass am Ende doch alles gut wird, auch mit Mimun, dem liebsten Jungen auf der ganzen Erde und im ganzen Weltall‚Ä¶
            Datum: 01.11., Uhrzeit: 16.00 Uhr, Ort: Theaterwerkstatt, Alter: ab 9 Jahren
        </div>
      </div>
    <!-- Questions B-->
      <div class="question-box" data-correct="Sie suchen einen Kinderfilm f√ºr ihren kleinen Sohn.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h4>Rasmus und der Landstreicher</h4>
            Nach dem Kinderbuch von Astrid Lindgren 
            Rasmus ist in einem Kinderheim aufgewachsen, er hat keine Eltern. Eines Tages l√§uft er davon und will sich Eltern suchen. Die erste Nacht schl√§ft er in einer Scheune im Stroh, und am Morgen entdeckt er neben sich Oskar. Oskar ist ein Landstreicher, der keine Wohnung hat. Zuerst hat Rasmus Angst vor ihm, aber schon bald merkt er, dass Oskar ein pr√§chtiger Mensch ist. Gemeinsam suchen sie Eltern f√ºr Rasmus. Doch als sie endlich prima Eltern gefunden haben, da wollen die beiden sich nicht mehr trennen.
            Datum: 6.11., Uhrzeit: 15.00 Uhr, Ort: B√ºrgerkino, Alter: ab 5 Jahren
        </div>
      </div>
      <!-- Questions C-->
      <div class="question-box" data-correct="__NO_CORRECT_ANSWER__">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h4>Claus von Wagner: Im Feld</h4>
            Die Verfilmung des Buches ‚ÄùIm Feld‚Äù handelt von einem jungen Mann, der bisher mit den W√∂lfen geheult hat. Er hat stets gemacht, was alle gemacht haben, und sich nach der Mehrheit gerichtet: F√ºhrerschein, Studium, Beruf, Freundin, iPod. In dieser Reihenfolge. Nun soll er pl√∂tzlich Vater werden. Doch der Antiheld ergreift die Flucht, um nachzudenken. Verfolgt von st√§dtischen Beamten, der Polizei, den Reportern eines regionalen H√∂rfunksenders und seinen eigenen √Ñngsten, st√ºrzt er sich in pointenreiche Analysen des Weltzustandes‚Ä¶
            Datum: 30.10. bis 01.11., Uhrzeit: 20.00 Uhr, Ort: Kinopolis
        </div>
      </div>
      <!-- Questions D-->
      <div class="question-box" data-correct="__NO_CORRECT_ANSWER__">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h4>Geschlossene Gesellschaft: Drama von Jean-Paul-Sartre</h4>
            Drei Personen, ein Mann und zwei Frauen, werden nach ihrem Tod in einem Zimmer eingesperrt, das keiner der drei jemals wieder verlassen und niemand anderes je betreten wird: Der Ort des Geschehens ist die H√∂lle. Alle drei sind sich bewusst, dass sie sich in der H√∂lle befinden, und machen sich auf das Schlimmste gefasst, aber die erwartete Folter und die k√∂rperlichen Qualen stellen sich nicht ein, nur eine leichte Hitze ist zu versp√ºren. Tastend versuchen Sie, voneinander den Grund f√ºr die H√∂llenfahrt zu erfahren, ohne jedoch ihre eigene Schuld zu offenbaren.
            Datum: 01.11., Uhrzeit: 20.00 Uhr, Ort: Euro Theater Central
        </div>
      </div>
      <!-- Questions E-->
      <div class="question-box" data-correct="Ihre Schwester interessiert sich f√ºr die Biographien gro√üer Musiker.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h4>Beethovens Bonn</h4>
            Im Dezember 1770 erblickte Ludwig von Beethoven in der Bonngasse 20 das Licht der Welt. Wer ahnte damals, dass mit ihm ein musikalisches Genie geboren wurde, dessen Musik heute in aller Welt bekannt ist? Bis 1792 lebte Beethoven in Bonn, bevor er nach Wien ging und zu einem der ber√ºhmtesten Komponisten der Welt wurde. Es werden Orte und Pl√§tze aufgesucht, wo der weltber√ºhmte Komponist wirkte und die faszinierenden Einblicke in das Alltagsleben dieses gro√üen Bonners erm√∂glichen.
            Datum: 01.12. bis 31.12., Ort: Touristeninformation
        </div>
      </div>
      <!-- Questions F-->
      <div class="question-box" data-correct="Sie suchen f√ºr sportliche Sprachkursteilnehmer eine M√∂glichkeit, Bonn zu zeigen.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h4>Radtour am Rhein</h4>
            Hinweis: Diese Tour ist nur von Gruppen auf Anfrage buchbar! Die Fahrr√§der sind mitzubringen. Die Tour wird vom ADFC angeboten und verl√§uft am Rhein, einem der geschichtstr√§chtigsten Fl√ºsse der Welt. Er symbolisiert wie f√ºr viele Rheinanwohner auch f√ºr Bonn √ºber Jahrhunderte hinweg bis auf den heutigen Tag die Lebensader der Stadt. Entlang des linksrheinischen Rheinufers sprechen die steinernen Zeitzeugen der Bonner Geschichte f√ºr sich, wobei auch die zukunftsweisenden Aspekte der Stadt nicht zu kurz kommen.
            Datum: 01.02. bis 31.12, Ort und Uhrzeit: nach Vereinbarung          
        </div>
      </div>
      <!-- Questions G-->
      <div class="question-box" data-correct="__NO_CORRECT_ANSWER__">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h4>Weihnachtsmarkt in Koblenz</h4>
            √úber 100 festlich geschm√ºckte Holzh√§uschen, der Duft von Lebkuchen und Gl√ºhwein liegt in der Luft, Weihnachtsmelodien erklingen im malerischen Ambiente der historischen Altstadt unweit der Einkaufsstra√üen: Das ist der Koblenzer Weihnachtsmarkt 2007. Alles, was das Herz in der Weihnachtszeit begehrte, findet sich hier wieder, denn auch in diesem Jahr warten wieder ein umfangreiches Angebot an Kunsthandwerk und Weihnachtsschmuck und eine riesige Auswahl an Geschenkartikeln auf die Besucher. Abgerundet durch Weihnachtsb√§ckerei und viele Attraktionen, wird der Besuch auf dem Koblenzer Weihnachtsmarkt zu einem Erlebnis, das Sie sich nicht entgehen lassen sollen.
            Datum: 23.11. - 23.12., Ort: Fu√üg√§ngerzone im Zentrum
        </div>
      </div>
      <!-- Questions H-->
      <div class="question-box" data-correct="Sie wollen mit ihren Kindern eine etwas andere, eher lustige Seite von Weihnachten erleben.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
          <h4>Drei Fl√∂he und das Jesuskind</h4> 
            Im Jahr 1 machten sich drei Fl√∂he aus Deutschland auf den Weg nach Israel, um einmal so richtig zu entspannen. Leider war zu diesem Zeitpunkt eine Volksz√§hlung im vollen Gange und die einzige √úbernachtungsm√∂glichkeit fanden sie in einem Stall bei Bethlehem. Dass sie diese Unterkunft auch noch mit einem kleinen Kind teilen m√ºssten, damit rechnete keiner der drei Fl√∂he. Und dass dieses Kind auch noch eine Ber√ºhmtheit war, machte die ganze Sache f√ºr die drei Fl√∂he zu einem aufregenden Abenteuer. Dieses neue Kinderst√ºck aus der Feder von Dirk Zimmer erz√§hlt die Weihnachtsgeschichte auf humorvolle und gef√ºhlvolle Weise aus der Sicht der drei Fl√∂hen.
            Datum: 26.11. - 22.12., Uhrzeit: jeweils, 15.00 Uhr, Ort: Innenhof des Rathauses, Alter: ab 5 Jahre.      
        </div>
      </div>
      <!-- Questions I-->
      <div class="question-box" data-correct="Sie m√∂chten an einem Abend alte und neue Weihnachtslieder h√∂ren.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h4>Weihnachtsshow</h4>
            "Stille Nacht" trifft "Last Christmas", Gospel umarmt Soul, und Pop k√ºsst Klassik. Als 1997 die Idee entstand, eine Weihnachtsshow zu entwickeln, die die sch√∂nsten Weihnachtslieder aller Zeiten und aller Genre in sich vereint, konnte sich keiner so recht vorstellen, dass diese Show einmal zur erfolgreichsten Weihnachtsshow Deutschlands avancieren w√ºrde. Seit zehn Jahren begeistert nun die Band "Christmast Moments" von Thomas Schwab & Band das Publikum sowohl in den gro√üen Konzerthallen der Republik (unter anderem Arena Trier, Ph√∂nix Halle Mainz) als auch vor den Fernsehern (ARD- Ausstrahlungen seit 2004). "Christmas Moments" trifft mitten ins Herz und konnte in den letzten Jahren mehr als 500.000 Zuschauer begeistern.
            Datum: 11.12., Uhrzeit: 20.00 Uhr, Ort: Rhein-Mosel-Halle
          </div>
      </div>
      <!-- Questions J-->
      <div class="question-box" data-correct="Sie lieben Auftritte von herausragenden Musik.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h4>Lasse Lindgren Ensemble</h4>
            Jazz vom Feinsten mit durchaus gewollten konservativen Z√ºgen. Der Trompeter Lasse Lindgren ist einer der innovativen Spitzen-Trompeter der aktuellen Jazzszene in Schweden, der in vielen internationalen Bigbands und zusammen mit anderen ber√ºhmten Jazzmusikern gespielt hat. Von der Tageszeitung "Svenska Dagbladet" wurde er als "einer der kompetentesten Trompetenspieler dieses Landes" bezeichnet und Randy Brecker schrieb: "Es ist so erfrischend, etwas zu h√∂ren, was wirklich originell ist! Lass Lindgren, Du bist ein wundervoller Spieler und Komponist". Sein neuestes Projekt ist ein Glaubensbekenntnis an die Kraft und Energie des Jazz mit eigener Handschrift: Lasse Lindgren hat eine virtuose, immer transparente Hingabe zu seinem Instrument.
            Datum: 1.11., Uhrzeit: 19.00 Uhr, Ort: Irish Pub im Stadtzentrum
        </div>
      </div>
        <!-- Questions K-->
      <div class="question-box" data-correct="Sie wollen mit Bekannten ausgehen um mal wieder so richtig lachen.">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h4>10 Jahre F√úR DIE KATZ</h4>
            Unglaublich! 10 Jahre ist es bereits her, seit F√úR DIE KATZ wie ein Faustschlag ins Licht der √ñffentlichkeit traten und sich binnen k√ºrzester Zeit in die Spitzenriege der deutschen Komiker katapultierten. Heute befinden sich die beiden mit Preisen √ºberh√§uften Weltb√ºrger Benno Rex und Karl Salzburger auf dem vorl√§ufigen H√∂hepunkt ihrer eindrucksvollen Karriere und gelten als die vielseitigsten, kreativsten und f√ºr Presse wie Fans schlichtweg lustigsten Kom√∂dianten Deutschlands. Ihre Wortsch√∂pfungen und Charaktere erweisen sich immer wieder als richtungsweisende Leitsterne f√ºr die gesamte Comedy-Branche.
            Datum: 5.11., Uhrzeit: 20.00 Uhr, Ort: Haus des Kabaretts
        </div>
      </div>
      <!-- Questions L-->
      <div class="question-box" data-correct="__NO_CORRECT_ANSWER__">
        <div class="drop-target empty-drop-target" ondragover="allowDrop(event)" ondrop="drop(event)" onclick="clickDrop(this)"></div>
        <div class="question-text">
            <h4>Weihnachtsvariet√© im Caf√© Spitz</h4>
            Das Weihnachtsvariet√© erwartet Sie auch in diesem Jahr mit atemberaubender Akrobatik, traumhafter Jonglage, erg√§nzt von Livemusikern. Seien Sie dabei und staunen Sie vielleicht mit ihrer Familie, mit ihren Lieblingskollegen oder der ganzen Firma oder einfach nur mit ihrem oder Ihrer Liebsten. Karl-Heinz Helmschrot hat auch in diesem Jahr wieder eine faszinierende Gruppe von sehr unterschiedlichen K√ºnstlern zusammengestellt. Zum 10-j√§hrigen Jubil√§um - 10 K√ºnstler! Nicht zust√§ndig ist er f√ºr Ihr leibliches Wohl! Daf√ºr haben die K√∂che des Caf√© Spitz wieder eine internationale Karte zusammengestellt, also freuen Sie sich auf K√∂stlichkeiten aus aller Welt. 
            Datum: 9.12., Uhrzeit: 21.00 Uhr, Ort: Caf√© Spitz
          </div>
      </div>
    </div>
  </div>

  <div class="right-column">
    <!-- MODIFIED: Added ondragover and ondrop to make this a droppable area -->
    <div class="right-column-content" onclick="clearSelected()" ondragover="allowDrop(event)" ondrop="dropOnAnswersContainer(event)">
      <!-- Answers -->
      <div class="draggable" draggable="true" id="a1" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Ihre Schwester interessiert sich f√ºr die Biographien gro√üer Musiker.
      </div>
      <div class="draggable" draggable="true" id="a2" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Sie lieben Auftritte von herausragenden Musik.
      </div>
      <div class="draggable" draggable="true" id="a3" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Sie lieben k√ºnstlerische Vielfalt und Vielseitigkeit und wollen Weihnachten ausgehen.
      </div>
      <div class="draggable" draggable="true" id="a4" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Sie m√∂chten an einem Abend alte und neue Weihnachtslieder h√∂ren.
      </div>
      <div class="draggable" draggable="true" id="a5" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Sie m√∂chten mit Ihrer zw√∂lfj√§hrigen Tochter ein altersgerechtes Theaterst√ºck sehen.
      </div>
      <div class="draggable" draggable="true" id="a6" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Sie suchen einen Kinderfilm f√ºr ihren kleinen Sohn.
      </div>
      <div class="draggable" draggable="true" id="a7" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Sie suchen f√ºr sportliche Sprachkursteilnehmer eine M√∂glichkeit, Bonn zu zeigen.
      </div>
      <div class="draggable" draggable="true" id="a8" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Sie wollen ihrem Freund, der Tanztheater liebt, eine Eintrittskarte zum Geburtstag schenken.
      </div>
      <div class="draggable" draggable="true" id="a9" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Sie wollen mit ihren Kindern eine etwas andere, eher lustige Seite von Weihnachten erleben.
      </div>
      <div class="draggable" draggable="true" id="a10" onclick="selectAnswer(this, event)" ondragstart="drag(event)">
        <input type="checkbox" class="wrong-flag" onclick="event.stopPropagation()"> Sie wollen mit Bekannten ausgehen um mal wieder so richtig lachen.
      </div>
    </div>
  </div>
</div>

<div id="result"></div>
<div class="button-container">
    <button id="submitQuizButton" class="quiz-button">
      <i class="fas fa-paper-plane"></i> Abschicken
    </button>
    <button id="resetQuizButton" class="quiz-button secondary">
      <i class="fas fa-redo"></i> Zur√ºcksetzen
    </button>
    <!-- Changed to <a> tag for navigation, href to a generic "index.html" or "#" -->
    <a href="/b2_exam.html" id="homeButton" class="quiz-button secondary" role="button">
      <i class="fas fa-home"></i> Startseite
    </a>
  </div>

<div id="warningBox">‚ö†Ô∏è Ila ma t7rktich ghadi tkhrej mn Session b3d <span id="countdown"><strong>30</strong></span> s!</div>

<script>
  let selectedAnswer = null;
  const rightColumnContent = document.querySelector(".right-column-content");
  const originalAnswerOrder = Array.from(rightColumnContent.querySelectorAll('.draggable')); // Store initial order for reset

  // MODIFIED: allowDrop to correctly identify parent droppable container
  function allowDrop(ev) {
    ev.preventDefault();
    let droppableContainer = ev.target;
    // Traverse up to find the actual droppable container (.drop-target or .right-column-content)
    while (droppableContainer && droppableContainer !== document.body &&
           !droppableContainer.classList.contains("drop-target") &&
           !droppableContainer.classList.contains("right-column-content")) {
        droppableContainer = droppableContainer.parentElement;
    }

    if (droppableContainer && (droppableContainer.classList.contains("drop-target") || droppableContainer.classList.contains("right-column-content"))) {
        droppableContainer.classList.add("drag-over");
    }
  }

  function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.id);
    ev.target.classList.add("dragging");
  }

  document.addEventListener('dragleave', function(event) {
    if (event.target.classList && (event.target.classList.contains("drop-target") || event.target.classList.contains("right-column-content"))) {
        if (!event.target.contains(event.relatedTarget) && event.target !== event.relatedTarget) {
             event.target.classList.remove("drag-over");
        } else if (event.relatedTarget === null) { 
            event.target.classList.remove("drag-over");
        }
    }
  }, false);
  
  document.addEventListener('dragend', function(event) {
    if (event.target.classList && event.target.classList.contains('draggable')) {
      event.target.classList.remove('dragging');
    }
    document.querySelectorAll('.drop-target.drag-over, .right-column-content.drag-over').forEach(el => {
        el.classList.remove('drag-over');
    });
  });

  // MODIFIED: drop function for question slots
  function drop(ev) {
    ev.preventDefault();
    const draggedId = ev.dataTransfer.getData("text");
    const draggedEl = document.getElementById(draggedId);
    let dropTarget = ev.target;

    while (dropTarget && !dropTarget.classList.contains("drop-target")) {
        dropTarget = dropTarget.parentElement;
    }
    
    if (!dropTarget || !draggedEl) return;

    dropTarget.classList.remove("drag-over");

    const originalParentOfDraggedEl = draggedEl.parentElement; 

    const currentAnswerInTarget = dropTarget.querySelector(".draggable");
    if (currentAnswerInTarget && currentAnswerInTarget !== draggedEl) {
      rightColumnContent.appendChild(currentAnswerInTarget);
      showCheckbox(currentAnswerInTarget);
    }
    
    dropTarget.innerHTML = ""; 
    dropTarget.appendChild(draggedEl);
    hideCheckbox(draggedEl);
    updateDropTargetState(dropTarget);

    if (originalParentOfDraggedEl &&
        originalParentOfDraggedEl.classList.contains("drop-target") &&
        originalParentOfDraggedEl !== dropTarget) {
        updateDropTargetState(originalParentOfDraggedEl);
    }

    if (selectedAnswer === draggedEl) {
        draggedEl.classList.remove("selected");
        selectedAnswer = null;
    }
  }

  // NEW: Function to handle drops onto the answers container
  function dropOnAnswersContainer(ev) {
    ev.preventDefault();
    const draggedId = ev.dataTransfer.getData("text");
    const draggedEl = document.getElementById(draggedId);
    const answersContainer = ev.currentTarget; 

    if (!draggedEl || !answersContainer) return;

    answersContainer.classList.remove("drag-over");

    const originalParentOfDraggedEl = draggedEl.parentElement; 

    answersContainer.appendChild(draggedEl);
    showCheckbox(draggedEl);

    if (originalParentOfDraggedEl && originalParentOfDraggedEl.classList.contains("drop-target")) {
        updateDropTargetState(originalParentOfDraggedEl);
    }

    if (selectedAnswer === draggedEl) {
        draggedEl.classList.remove("selected");
        selectedAnswer = null;
    }
  }


  function hideCheckbox(el) {
    const checkbox = el.querySelector(".wrong-flag");
    if (checkbox) checkbox.style.display = "none";
  }

  function showCheckbox(el) {
    const checkbox = el.querySelector(".wrong-flag");
    if (checkbox) checkbox.style.display = "inline-block";
  }

  function selectAnswer(el, event) {
    event.stopPropagation(); 
    if (selectedAnswer === el) { 
      el.classList.remove("selected");
      selectedAnswer = null;
    } else {
      if (selectedAnswer) selectedAnswer.classList.remove("selected");
      selectedAnswer = el;
      el.classList.add("selected");
    }
  }

  // MODIFIED: clickDrop function
  function clickDrop(targetDropzone) {
    if (selectedAnswer) {
      const originalParentOfSelectedAnswer = selectedAnswer.parentElement;

      const currentAnswerInDropzone = targetDropzone.querySelector(".draggable");
      if (currentAnswerInDropzone && currentAnswerInDropzone !== selectedAnswer) {
        rightColumnContent.appendChild(currentAnswerInDropzone);
        showCheckbox(currentAnswerInDropzone);
      }
      
      targetDropzone.innerHTML = ""; 
      targetDropzone.appendChild(selectedAnswer);
      hideCheckbox(selectedAnswer);
      updateDropTargetState(targetDropzone);

      if (originalParentOfSelectedAnswer &&
          originalParentOfSelectedAnswer.classList.contains("drop-target") &&
          originalParentOfSelectedAnswer !== targetDropzone) {
          updateDropTargetState(originalParentOfSelectedAnswer);
      }

      selectedAnswer.classList.remove("selected");
      selectedAnswer = null;
    }
  }

  function clearSelected() {
    if (selectedAnswer) {
      selectedAnswer.classList.remove("selected");
      selectedAnswer = null;
    }
  }

  function updateDropTargetState(dropTarget) {
    if (!dropTarget || !dropTarget.classList.contains('drop-target')) return;
    
    if (dropTarget.querySelector(".draggable")) {
      dropTarget.classList.remove("empty-drop-target");
    } else {
      dropTarget.classList.add("empty-drop-target");
    }
  }

  function getDraggableText(draggableElement) {
    const clone = draggableElement.cloneNode(true);
    const checkbox = clone.querySelector('.wrong-flag');
    if (checkbox) {
        checkbox.remove();
    }
    return clone.textContent.trim();
  }

  function submitQuiz() {
    let total = 0, correct = 0;
    document.querySelectorAll('.question-box').forEach((box) => {
      total++;
      const correctAnswerText = box.getAttribute("data-correct").trim();
      const dropTarget = box.querySelector(".drop-target");
      const droppedDraggable = dropTarget.querySelector(".draggable");
      
      dropTarget.classList.remove("correct", "incorrect"); 

      if (droppedDraggable) { 
        const selectedText = getDraggableText(droppedDraggable); 
        if (correctAnswerText === "__NO_CORRECT_ANSWER__") {
          dropTarget.classList.add("incorrect");
        } else {
          if (selectedText === correctAnswerText) {
            dropTarget.classList.add("correct");
            correct++;
          } else {
            dropTarget.classList.add("incorrect");
          }
        }
      } else { 
        if (correctAnswerText !== "__NO_CORRECT_ANSWER__") {
          dropTarget.classList.add("incorrect");
        }
      }
      updateDropTargetState(dropTarget); 
    });

    let wrongMarkedCorrect = 0, wrongMarkedTotal = 0;
    rightColumnContent.querySelectorAll('.draggable').forEach((answerEl) => {
      const text = getDraggableText(answerEl); 
      const checkbox = answerEl.querySelector('.wrong-flag');
      
      const isACorrectAnswerOptionForAnyQuestion = Array.from(document.querySelectorAll('.question-box'))
        .some(box => {
            const qCorrectText = box.getAttribute('data-correct').trim();
            return qCorrectText !== "__NO_CORRECT_ANSWER__" && qCorrectText === text;
        });
      
      if (!isACorrectAnswerOptionForAnyQuestion) { 
        wrongMarkedTotal++; 
        if (checkbox.checked) {
          wrongMarkedCorrect++; 
        }
      }
    });

    const questionsWithNoAnswer = Array.from(document.querySelectorAll('.question-box'))
                                      .filter(box => box.getAttribute('data-correct').trim() === "__NO_CORRECT_ANSWER__").length;
    const scorableTotal = total - questionsWithNoAnswer;


    const resultDiv = document.getElementById("result");
    resultDiv.innerHTML =
      `<span class="correct-count">‚úÖ ${correct}</span> von <span class="total-count">${scorableTotal}</span> bewertbaren Fragen richtig. | ` + 
      `<span class="marked-wrong-count">üö´ Falsch-Antworten korrekt markiert: ${wrongMarkedCorrect}</span> von ${wrongMarkedTotal}.`;
  }

  function resetQuiz() {
    document.querySelectorAll('.drop-target').forEach(dt => {
        const draggable = dt.querySelector('.draggable');
        if (draggable) {
            rightColumnContent.appendChild(draggable); 
            showCheckbox(draggable); 
        }
        dt.innerHTML = ''; 
        dt.classList.remove('correct', 'incorrect'); 
        updateDropTargetState(dt); 
    });

    rightColumnContent.innerHTML = ''; 
    originalAnswerOrder.forEach(draggable => {
        rightColumnContent.appendChild(draggable); 
        draggable.classList.remove('selected', 'dragging'); 
        showCheckbox(draggable); 
        const checkbox = draggable.querySelector('.wrong-flag');
        if (checkbox) checkbox.checked = false; 
    });
    
    if (selectedAnswer) {
      selectedAnswer.classList.remove('selected');
      selectedAnswer = null;
    }

    document.getElementById("result").innerHTML = ""; 
  }

  document.getElementById('submitQuizButton').addEventListener('click', submitQuiz);
  document.getElementById('resetQuizButton').addEventListener('click', resetQuiz);

  document.querySelectorAll('.drop-target').forEach(updateDropTargetState);
</script>
 
 <script>
let pingTimeout;
let logoutTimer;
let warningTimer;
let countdownTimer;
let lastPing = 0;

const INACTIVITY_LIMIT = 15 * 60 * 1000; // 15 minutes
const WARNING_BEFORE_LOGOUT = 30 * 1000; // 30 seconds
const warningBox = document.getElementById("warningBox");
const countdownEl = document.getElementById("countdown");

function sendPing() {
    const now = Date.now();
    if (now - lastPing < 10000) return; 
    lastPing = now;
    fetch("/ping").catch(() => {});
}

function resetTimers() {
    clearTimeout(pingTimeout);
    clearTimeout(logoutTimer);
    clearTimeout(warningTimer);
    clearInterval(countdownTimer);

    warningBox.style.display = "none"; // üü° hide warning if active again

    sendPing();
    pingTimeout = setTimeout(sendPing, 60 * 1000);

    // Show warning 30s before logout
    warningTimer = setTimeout(() => {
        let remaining = 30;
        warningBox.style.display = "block";
        countdownEl.textContent = remaining;

        countdownTimer = setInterval(() => {
            remaining--;
            countdownEl.textContent = remaining;
            if (remaining <= 0) {
                clearInterval(countdownTimer);
            }
        }, 1000);
    }, INACTIVITY_LIMIT - WARNING_BEFORE_LOGOUT);

    // Auto logout
    logoutTimer = setTimeout(() => {
        fetch("/logout", { method: "POST" })
          .then(() => window.location.href = "/");
    }, INACTIVITY_LIMIT);
}

// Events
["mousemove", "keydown", "scroll", "click", "touchstart"].forEach(evt => {
    document.addEventListener(evt, resetTimers);
});

window.addEventListener("pageshow", sendPing);
window.addEventListener("beforeunload", sendPing);

resetTimers();
</script>


</body>
</html>